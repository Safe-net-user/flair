"use strict";exports.id=165,exports.ids=[165],exports.modules={43183:(e,t)=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.Q=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=(t||{}).decode||i,a=0;a<e.length;){var s=e.indexOf("=",a);if(-1===s)break;var o=e.indexOf(";",a);if(-1===o)o=e.length;else if(o<s){a=e.lastIndexOf(";",s-1)+1;continue}var c=e.slice(a,s).trim();if(void 0===r[c]){var l=e.slice(s+1,o).trim();34===l.charCodeAt(0)&&(l=l.slice(1,-1)),r[c]=function(e,t){try{return t(e)}catch(t){return e}}(l,n)}a=o+1}return r},t.q=function(e,t,i){var s=i||{},o=s.encode||a;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var c=o(t);if(c&&!n.test(c))throw TypeError("argument val is invalid");var l=e+"="+c;if(null!=s.maxAge){var d=s.maxAge-0;if(isNaN(d)||!isFinite(d))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(d)}if(s.domain){if(!n.test(s.domain))throw TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!n.test(s.path))throw TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){var u=s.expires;if("[object Date]"!==r.call(u)&&!(u instanceof Date)||isNaN(u.valueOf()))throw TypeError("option expires is invalid");l+="; Expires="+u.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.partitioned&&(l+="; Partitioned"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():s.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function a(e){return encodeURIComponent(e)}},33085:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return a}});let n=r(45869),i=r(6278);class a{get isEnabled(){return this._provider.isEnabled}enable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,i.trackDynamicDataAccessed)(e,"draftMode().enable()"),this._provider.enable()}disable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,i.trackDynamicDataAccessed)(e,"draftMode().disable()"),this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},88757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cookies:function(){return p},draftMode:function(){return h},headers:function(){return u}});let n=r(68996),i=r(53047),a=r(92044),s=r(72934),o=r(33085),c=r(6278),l=r(45869),d=r(54580);function u(){let e="headers",t=l.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return i.HeadersAdapter.seal(new Headers({}));(0,c.trackDynamicDataAccessed)(t,e)}return(0,d.getExpectedRequestStore)(e).headers}function p(){let e="cookies",t=l.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return n.RequestCookiesAdapter.seal(new a.RequestCookies(new Headers({})));(0,c.trackDynamicDataAccessed)(t,e)}let r=(0,d.getExpectedRequestStore)(e),i=s.actionAsyncStorage.getStore();return(null==i?void 0:i.isAction)||(null==i?void 0:i.isAppRoute)?r.mutableCookies:r.cookies}function h(){let e=(0,d.getExpectedRequestStore)("draftMode");return new o.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},61085:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return s},RedirectType:function(){return n.RedirectType},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=r(83953),i=r(16399);class a extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class s extends URLSearchParams{append(){throw new a}delete(){throw new a}set(){throw new a}sort(){throw new a}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return i},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,r)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return c},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return h},getURLFromRedirectError:function(){return p},isRedirectError:function(){return u},permanentRedirect:function(){return d},redirect:function(){return l}});let i=r(54580),a=r(72934),s=r(8586),o="NEXT_REDIRECT";function c(e,t,r){void 0===r&&(r=s.RedirectStatusCode.TemporaryRedirect);let n=Error(o);n.digest=o+";"+t+";"+e+";"+r+";";let a=i.requestAsyncStorage.getStore();return a&&(n.mutableCookies=a.mutableCookies),n}function l(e,t){void 0===t&&(t="replace");let r=a.actionAsyncStorage.getStore();throw c(e,t,(null==r?void 0:r.isAction)?s.RedirectStatusCode.SeeOther:s.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let r=a.actionAsyncStorage.getStore();throw c(e,t,(null==r?void 0:r.isAction)?s.RedirectStatusCode.SeeOther:s.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,i]=e.digest.split(";",4),a=Number(i);return t===o&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(a)&&a in s.RedirectStatusCode}function p(e){return u(e)?e.digest.split(";",3)[2]:null}function h(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53047:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return i}});let n=r(38238);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let a=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==s)return n.ReflectAdapter.get(t,s,i)},set(t,r,i,a){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,a);let s=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===s);return n.ReflectAdapter.set(t,o??r,i,a)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==a&&n.ReflectAdapter.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===a||n.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},38238:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},68996:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return u},ReadonlyRequestCookiesError:function(){return s},RequestCookiesAdapter:function(){return o},appendMutableCookies:function(){return d},getModifiedCookieValues:function(){return l}});let n=r(92044),i=r(38238),a=r(45869);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new s}}class o{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let c=Symbol.for("next.mutated.cookies");function l(e){let t=e[c];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=l(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),a=i.getAll();for(let e of r)i.set(e);for(let e of a)i.set(e);return!0}class u{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let s=[],o=new Set,l=()=>{let e=a.staticGenerationAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),s=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of s){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case c:return s;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{l()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{l()}};default:return i.ReflectAdapter.get(e,t,r)}}})}}},80772:(e,t,r)=>{r.d(t,{Z:()=>n});function n(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}},7585:(e,t,r)=>{function n(e){return{createUser:({id:t,...r})=>e.user.create({data:r}),getUser:t=>e.user.findUnique({where:{id:t}}),getUserByEmail:t=>e.user.findUnique({where:{email:t}}),async getUserByAccount(t){let r=await e.account.findUnique({where:{provider_providerAccountId:t},select:{user:!0}});return r?.user??null},updateUser:({id:t,...r})=>e.user.update({where:{id:t},data:r}),deleteUser:t=>e.user.delete({where:{id:t}}),linkAccount:t=>e.account.create({data:t}),unlinkAccount:t=>e.account.delete({where:{provider_providerAccountId:t}}),async getSessionAndUser(t){let r=await e.session.findUnique({where:{sessionToken:t},include:{user:!0}});if(!r)return null;let{user:n,...i}=r;return{user:n,session:i}},createSession:t=>e.session.create({data:t}),updateSession:t=>e.session.update({where:{sessionToken:t.sessionToken},data:t}),deleteSession:t=>e.session.delete({where:{sessionToken:t}}),async createVerificationToken(t){let r=await e.verificationToken.create({data:t});return r.id&&delete r.id,r},async useVerificationToken(t){try{let r=await e.verificationToken.delete({where:{identifier_token:t}});return r.id&&delete r.id,r}catch(e){if("P2025"===e.code)return null;throw e}},getAccount:async(t,r)=>e.account.findFirst({where:{providerAccountId:t,provider:r}}),createAuthenticator:async t=>e.authenticator.create({data:t}).then(i),async getAuthenticator(t){let r=await e.authenticator.findUnique({where:{credentialID:t}});return r?i(r):null},listAuthenticatorsByUserId:async t=>(await e.authenticator.findMany({where:{userId:t}})).map(i),updateAuthenticatorCounter:async(t,r)=>e.authenticator.update({where:{credentialID:t},data:{counter:r}}).then(i)}}function i(e){let{transports:t,id:r,user:n,...i}=e;return{...i,transports:t||void 0}}r.d(t,{N:()=>n})},9464:(e,t,r)=>{let n,i,a,s;r.d(t,{Z:()=>ai});var o=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},c=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function l(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class d{constructor(e,t,r){if(rp.add(this),rh.set(this,{}),rf.set(this,void 0),rm.set(this,void 0),o(this,rm,r,"f"),o(this,rf,e,"f"),!t)return;let{name:n}=e;for(let[e,r]of Object.entries(t))e.startsWith(n)&&r&&(c(this,rh,"f")[e]=r)}get value(){return Object.keys(c(this,rh,"f")).sort((e,t)=>parseInt(e.split(".").pop()||"0")-parseInt(t.split(".").pop()||"0")).map(e=>c(this,rh,"f")[e]).join("")}chunk(e,t){let r=c(this,rp,"m",rg).call(this);for(let n of c(this,rp,"m",ry).call(this,{name:c(this,rf,"f").name,value:e,options:{...c(this,rf,"f").options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(c(this,rp,"m",rg).call(this))}}rh=new WeakMap,rf=new WeakMap,rm=new WeakMap,rp=new WeakSet,ry=function(e){let t=Math.ceil(e.value.length/3936);if(1===t)return c(this,rh,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,i=e.value.substr(3936*n,3936);r.push({...e,name:t,value:i}),c(this,rh,"f")[t]=i}return c(this,rm,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:e.value.length,chunks:r.map(e=>e.value.length+160)}),r},rg=function(){let e={};for(let t in c(this,rh,"f"))delete c(this,rh,"f")?.[t],e[t]={name:t,value:"",options:{...c(this,rf,"f").options,maxAge:0}};return e};class u extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?" .":""}Read more at ${r}`}}class p extends u{}p.kind="signIn";class h extends u{}h.type="AdapterError";class f extends u{}f.type="AccessDenied";class m extends u{}m.type="CallbackRouteError";class y extends u{}y.type="ErrorPageLoop";class g extends u{}g.type="EventError";class _ extends u{}_.type="InvalidCallbackUrl";class w extends p{constructor(){super(...arguments),this.code="credentials"}}w.type="CredentialsSignin";class v extends u{}v.type="InvalidEndpoints";class b extends u{}b.type="InvalidCheck";class k extends u{}k.type="JWTSessionError";class x extends u{}x.type="MissingAdapter";class S extends u{}S.type="MissingAdapterMethods";class A extends u{}A.type="MissingAuthorize";class E extends u{}E.type="MissingSecret";class T extends p{}T.type="OAuthAccountNotLinked";class C extends p{}C.type="OAuthCallbackError";class P extends u{}P.type="OAuthProfileParseError";class R extends u{}R.type="SessionTokenError";class O extends p{}O.type="OAuthSignInError";class U extends p{}U.type="EmailSignInError";class I extends u{}I.type="SignOutError";class j extends u{}j.type="UnknownAction";class $ extends u{}$.type="UnsupportedStrategy";class H extends u{}H.type="InvalidProvider";class N extends u{}N.type="UntrustedHost";class L extends u{}L.type="Verification";class D extends p{}D.type="MissingCSRF";let M=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class W extends u{}W.type="DuplicateConditionalUI";class K extends u{}K.type="MissingWebAuthnAutocomplete";class J extends u{}J.type="WebAuthnVerificationError";class Z extends p{}Z.type="AccountNotLinked";class z extends u{}z.type="ExperimentalFeatureNotEnabled";let V=!1;function B(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let F=!1,q=!1,G=!1,X=["createVerificationToken","useVerificationToken","getUserByEmail"],Y=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],Q=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];var ee=r(6113);let et=(e,t,r,n,i)=>{let a=parseInt(e.substr(3),10)>>3||20,s=(0,ee.createHmac)(e,r.byteLength?r:new Uint8Array(a)).update(t).digest(),o=Math.ceil(i/a),c=new Uint8Array(a*o+n.byteLength+1),l=0,d=0;for(let t=1;t<=o;t++)c.set(n,d),c[d+n.byteLength]=t,c.set((0,ee.createHmac)(e,s).update(c.subarray(l,d+n.byteLength+1)).digest(),d),l=d,d+=a;return c.slice(0,i)};"function"!=typeof ee.hkdf||process.versions.electron||(n=async(...e)=>new Promise((t,r)=>{ee.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let er=async(e,t,r,i,a)=>(n||et)(e,t,r,i,a);function en(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function ei(e,t,r,n,i){return er(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=en(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),en(r,"salt"),function(e){let t=en(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}var ea=r(72254),es=r(6005);let eo=(e,t)=>(0,es.createHash)(e).update(t).digest(),ec=new TextEncoder,el=new TextDecoder;function ed(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function eu(e,t){return ed(ec.encode(e),new Uint8Array([0]),t)}function ep(e,t,r){if(t<0||t>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function eh(e){let t=new Uint8Array(4);return ep(t,e),t}function ef(e){return ed(eh(e.length),e)}async function em(e,t,r){let n=Math.ceil((t>>3)/32),i=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(eh(t+1)),n.set(e,4),n.set(r,4+e.length),i.set(await eo("sha256",n),32*t)}return i.slice(0,t>>3)}let ey=e=>ea.Buffer.from(e).toString("base64url"),eg=e=>new Uint8Array(ea.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=el.decode(t)),t}(e),"base64"));class e_ extends Error{static get code(){return"ERR_JOSE_GENERIC"}code="ERR_JOSE_GENERIC";constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class ew extends e_{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;constructor(e,t="unspecified",r="unspecified"){super(e),this.claim=t,this.reason=r}}class ev extends e_{static get code(){return"ERR_JWT_EXPIRED"}code="ERR_JWT_EXPIRED";claim;reason;constructor(e,t="unspecified",r="unspecified"){super(e),this.claim=t,this.reason=r}}class eb extends e_{static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}code="ERR_JOSE_ALG_NOT_ALLOWED"}class ek extends e_{static get code(){return"ERR_JOSE_NOT_SUPPORTED"}code="ERR_JOSE_NOT_SUPPORTED"}class ex extends e_{static get code(){return"ERR_JWE_DECRYPTION_FAILED"}code="ERR_JWE_DECRYPTION_FAILED";message="decryption operation failed"}class eS extends e_{static get code(){return"ERR_JWE_INVALID"}code="ERR_JWE_INVALID"}class eA extends e_{static get code(){return"ERR_JWT_INVALID"}code="ERR_JWT_INVALID"}class eE extends e_{static get code(){return"ERR_JWK_INVALID"}code="ERR_JWK_INVALID"}class eT extends e_{static get code(){return"ERR_JWKS_INVALID"}code="ERR_JWKS_INVALID"}class eC extends e_{static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}code="ERR_JWKS_NO_MATCHING_KEY";message="no applicable key found in the JSON Web Key Set"}class eP extends e_{[Symbol.asyncIterator];static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";message="multiple matching keys found in the JSON Web Key Set"}class eR extends e_{static get code(){return"ERR_JWKS_TIMEOUT"}code="ERR_JWKS_TIMEOUT";message="request timed out"}function eO(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new ek(`Unsupported JWE Algorithm: ${e}`)}}let eU=e=>(0,es.randomFillSync)(new Uint8Array(eO(e)>>3)),eI=(e,t)=>{if(t.length<<3!==eO(e))throw new eS("Invalid Initialization Vector length")};var ej=r(47261);let e$=e=>ej.types.isKeyObject(e),eH=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new ek(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new eS(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if(e$(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new eS(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")},eN=es.timingSafeEqual;function eL(e,t,r,n,i,a){let s=ed(e,t,r,function(e){let t=new Uint8Array(8);return ep(t,Math.floor(e/4294967296),0),ep(t,e%4294967296,4),t}(e.length<<3)),o=(0,es.createHmac)(`sha${n}`,i);return o.update(s),o.digest().slice(0,a>>3)}let eD=es.webcrypto,eM=e=>ej.types.isCryptoKey(e);function eW(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function eK(e,t){return e.name===t}function eJ(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!eK(e.algorithm,"AES-GCM"))throw eW("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eW(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!eK(e.algorithm,"AES-KW"))throw eW("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eW(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw eW("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!eK(e.algorithm,"PBKDF2"))throw eW("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!eK(e.algorithm,"RSA-OAEP"))throw eW("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(parseInt(e.algorithm.hash.name.slice(4),10)!==r)throw eW(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}(function(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}})(e,r)}function eZ(e,t,...r){if(r.length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let ez=(e,...t)=>eZ("Key must be ",e,...t);function eV(e,t,...r){return eZ(`Key for the ${e} algorithm must be `,t,...r)}let eB=e=>(i||=new Set((0,es.getCiphers)())).has(e),eF=e=>e$(e)||eM(e),eq=["KeyObject"];(globalThis.CryptoKey||eD?.CryptoKey)&&eq.push("CryptoKey");let eG=(e,t,r,n,i,a)=>{let s;if(eM(t))eJ(t,e,"decrypt"),s=es.KeyObject.from(t);else if(t instanceof Uint8Array||e$(t))s=t;else throw TypeError(ez(t,...eq,"Uint8Array"));if(!n)throw new eS("JWE Initialization Vector missing");if(!i)throw new eS("JWE Authentication Tag missing");switch(eH(e,s),eI(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,n,i,a){let s,o;let c=parseInt(e.slice(1,4),10);e$(t)&&(t=t.export());let l=t.subarray(c>>3),d=t.subarray(0,c>>3),u=parseInt(e.slice(-3),10),p=`aes-${c}-cbc`;if(!eB(p))throw new ek(`alg ${e} is not supported by your javascript runtime`);let h=eL(a,n,r,u,d,c);try{s=eN(i,h)}catch{}if(!s)throw new ex;try{let e=(0,es.createDecipheriv)(p,l,n);o=ed(e.update(r),e.final())}catch{}if(!o)throw new ex;return o}(e,s,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,n,i,a){let s=parseInt(e.slice(1,4),10),o=`aes-${s}-gcm`;if(!eB(o))throw new ek(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,es.createDecipheriv)(o,t,n,{authTagLength:16});e.setAuthTag(i),a.byteLength&&e.setAAD(a,{plaintextLength:r.length});let s=e.update(r);return e.final(),s}catch{throw new ex}}(e,s,r,n,i,a);default:throw new ek("Unsupported JWE Content Encryption Algorithm")}},eX=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0};function eY(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function eQ(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function e0(e,t,r){if(e$(e))return e;if(e instanceof Uint8Array)return(0,es.createSecretKey)(e);if(eM(e))return eJ(e,t,r),es.KeyObject.from(e);throw TypeError(ez(e,...eq,"Uint8Array"))}let e1=(e,t,r)=>{let n=parseInt(e.slice(1,4),10),i=`aes${n}-wrap`;if(!eB(i))throw new ek(`alg ${e} is not supported either by JOSE or your javascript runtime`);let a=e0(t,e,"wrapKey");eQ(a,e);let s=(0,es.createCipheriv)(i,a,ea.Buffer.alloc(8,166));return ed(s.update(r),s.final())},e2=(e,t,r)=>{let n=parseInt(e.slice(1,4),10),i=`aes${n}-wrap`;if(!eB(i))throw new ek(`alg ${e} is not supported either by JOSE or your javascript runtime`);let a=e0(t,e,"unwrapKey");eQ(a,e);let s=(0,es.createDecipheriv)(i,a,ea.Buffer.alloc(8,166));return ed(s.update(r),s.final())};new WeakMap;let e5=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new ek("Unsupported key curve for this operation")}},e4=(e,t)=>{let r;if(eM(e))r=es.KeyObject.from(e);else if(e$(e))r=e;else throw TypeError(ez(e,...eq));if("secret"===r.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let e=r.asymmetricKeyDetails.namedCurve;if(t)return e;return e5(e)}default:throw TypeError("Invalid asymmetric key type for this operation")}},e8=(0,ej.promisify)(es.generateKeyPair);async function e6(e,t,r,n,i=new Uint8Array(0),a=new Uint8Array(0)){let s,o;if(eM(e))eJ(e,"ECDH"),s=es.KeyObject.from(e);else if(e$(e))s=e;else throw TypeError(ez(e,...eq));if(eM(t))eJ(t,"ECDH","deriveBits"),o=es.KeyObject.from(t);else if(e$(t))o=t;else throw TypeError(ez(t,...eq));let c=ed(ef(ec.encode(r)),ef(i),ef(a),eh(n));return em((0,es.diffieHellman)({privateKey:o,publicKey:s}),n,c)}async function e3(e){let t;if(eM(e))t=es.KeyObject.from(e);else if(e$(e))t=e;else throw TypeError(ez(e,...eq));switch(t.asymmetricKeyType){case"x25519":return e8("x25519");case"x448":return e8("x448");case"ec":return e8("ec",{namedCurve:e4(t)});default:throw new ek("Invalid or unsupported EPK")}}let e9=e=>["P-256","P-384","P-521","X25519","X448"].includes(e4(e));function e7(e){if(!(e instanceof Uint8Array)||e.length<8)throw new eS("PBES2 Salt Input must be 8 or more octets")}let te=(0,ej.promisify)(es.pbkdf2);function tt(e,t){if(e$(e))return e.export();if(e instanceof Uint8Array)return e;if(eM(e))return eJ(e,t,"deriveBits","deriveKey"),es.KeyObject.from(e).export();throw TypeError(ez(e,...eq,"Uint8Array"))}let tr=async(e,t,r,n=2048,i=(0,es.randomFillSync)(new Uint8Array(16)))=>{e7(i);let a=eu(e,i),s=parseInt(e.slice(13,16),10)>>3,o=tt(t,e),c=await te(o,a,n,s,`sha${e.slice(8,11)}`);return{encryptedKey:await e1(e.slice(-6),c,r),p2c:n,p2s:ey(i)}},tn=async(e,t,r,n,i)=>{e7(i);let a=eu(e,i),s=parseInt(e.slice(13,16),10)>>3,o=tt(t,e),c=await te(o,a,n,s,`sha${e.slice(8,11)}`);return e2(e.slice(-6),c,r)},ti=(e,t)=>{let{modulusLength:r}=e.asymmetricKeyDetails;if("number"!=typeof r||r<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)},ta=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");ti(e,t)},ts=(0,ej.deprecate)(()=>es.constants.RSA_PKCS1_PADDING,'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),to=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return es.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return ts();default:return}},tc=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function tl(e,t,...r){if(e$(e))return e;if(eM(e))return eJ(e,t,...r),es.KeyObject.from(e);throw TypeError(ez(e,...eq))}let td=(e,t,r)=>{let n=to(e),i=tc(e),a=tl(t,e,"wrapKey","encrypt");return ta(a,e),(0,es.publicEncrypt)({key:a,oaepHash:i,padding:n},r)},tu=(e,t,r)=>{let n=to(e),i=tc(e),a=tl(t,e,"unwrapKey","decrypt");return ta(a,e),(0,es.privateDecrypt)({key:a,oaepHash:i,padding:n},r)};function tp(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new ek(`Unsupported JWE Algorithm: ${e}`)}}let th=e=>(0,es.randomFillSync)(new Uint8Array(tp(e)>>3)),tf=e=>(e.d?es.createPrivateKey:es.createPublicKey)({format:"jwk",key:e});async function tm(e,t){if(!eY(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return eg(e.k);case"RSA":if(void 0!==e.oth)throw new ek('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return tf({...e,alg:t});default:throw new ek('Unsupported "kty" (Key Type) Parameter value')}}let ty=(e,t)=>{if(!(t instanceof Uint8Array)){if(!eF(t))throw TypeError(eV(e,t,...eq,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${eq.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},tg=(e,t,r)=>{if(!eF(t))throw TypeError(eV(e,t,...eq));if("secret"===t.type)throw TypeError(`${eq.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${eq.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${eq.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${eq.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${eq.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},t_=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?ty(e,t):tg(e,t,r)},tw=(e,t,r,n,i)=>{let a;if(eM(r))eJ(r,e,"encrypt"),a=es.KeyObject.from(r);else if(r instanceof Uint8Array||e$(r))a=r;else throw TypeError(ez(r,...eq,"Uint8Array"));switch(eH(e,a),n?eI(e,n):n=eU(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,n,i){let a=parseInt(e.slice(1,4),10);e$(r)&&(r=r.export());let s=r.subarray(a>>3),o=r.subarray(0,a>>3),c=`aes-${a}-cbc`;if(!eB(c))throw new ek(`alg ${e} is not supported by your javascript runtime`);let l=(0,es.createCipheriv)(c,s,n),d=ed(l.update(t),l.final()),u=eL(i,n,d,parseInt(e.slice(-3),10),o,a);return{ciphertext:d,tag:u,iv:n}}(e,t,a,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,n,i){let a=parseInt(e.slice(1,4),10),s=`aes-${a}-gcm`;if(!eB(s))throw new ek(`alg ${e} is not supported by your javascript runtime`);let o=(0,es.createCipheriv)(s,r,n,{authTagLength:16});i.byteLength&&o.setAAD(i,{plaintextLength:t.length});let c=o.update(t);return o.final(),{ciphertext:c,tag:o.getAuthTag(),iv:n}}(e,t,a,n,i);default:throw new ek("Unsupported JWE Content Encryption Algorithm")}};async function tv(e,t,r,n){let i=e.slice(0,7),a=await tw(i,r,t,n,new Uint8Array(0));return{encryptedKey:a.ciphertext,iv:ey(a.iv),tag:ey(a.tag)}}async function tb(e,t,r,n,i){return eG(e.slice(0,7),t,r,n,i,new Uint8Array(0))}async function tk(e,t,r,n,i){switch(t_(e,t,"decrypt"),e){case"dir":if(void 0!==r)throw new eS("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new eS("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,a;if(!eY(n.epk))throw new eS('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!e9(t))throw new ek("ECDH with the provided key is not allowed or not supported by your javascript runtime");let s=await tm(n.epk,e);if(void 0!==n.apu){if("string"!=typeof n.apu)throw new eS('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=eg(n.apu)}catch{throw new eS("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new eS('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=eg(n.apv)}catch{throw new eS("Failed to base64url decode the apv")}}let o=await e6(s,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?tp(n.enc):parseInt(e.slice(-5,-2),10),i,a);if("ECDH-ES"===e)return o;if(void 0===r)throw new eS("JWE Encrypted Key missing");return e2(e.slice(-6),o,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new eS("JWE Encrypted Key missing");return tu(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(void 0===r)throw new eS("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new eS('JOSE Header "p2c" (PBES2 Count) missing or invalid');let s=i?.maxPBES2Count||1e4;if(n.p2c>s)throw new eS('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new eS('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=eg(n.p2s)}catch{throw new eS("Failed to base64url decode the p2s")}return tn(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new eS("JWE Encrypted Key missing");return e2(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,a;if(void 0===r)throw new eS("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new eS('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new eS('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=eg(n.iv)}catch{throw new eS("Failed to base64url decode the iv")}try{a=eg(n.tag)}catch{throw new eS("Failed to base64url decode the tag")}return tb(e,t,r,i,a)}default:throw new ek('Invalid or unsupported "alg" (JWE Algorithm) header value')}}let tx=function(e,t,r,n,i){let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(s))throw new ek(`Extension Header Parameter "${s}" is not recognized`);if(void 0===i[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&void 0===n[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(n.crit)},tS=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function tA(e,t,r){let n,i,a,s,o,c,l;if(!eY(e))throw new eS("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new eS("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new eS("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new eS("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new eS("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new eS("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new eS("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new eS("JWE AAD incorrect type");if(void 0!==e.header&&!eY(e.header))throw new eS("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!eY(e.unprotected))throw new eS("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=eg(e.protected);n=JSON.parse(el.decode(t))}catch{throw new eS("JWE Protected Header is invalid")}if(!eX(n,e.header,e.unprotected))throw new eS("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let d={...n,...e.header,...e.unprotected};if(tx(eS,new Map,r?.crit,n,d),void 0!==d.zip)throw new ek('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:u,enc:p}=d;if("string"!=typeof u||!u)throw new eS("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof p||!p)throw new eS("missing JWE Encryption Algorithm (enc) in JWE Header");let h=r&&tS("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&tS("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(h&&!h.has(u)||!h&&u.startsWith("PBES2"))throw new eb('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(p))throw new eb('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=eg(e.encrypted_key)}catch{throw new eS("Failed to base64url decode the encrypted_key")}let m=!1;"function"==typeof t&&(t=await t(n,e),m=!0);try{a=await tk(u,t,i,d,r)}catch(e){if(e instanceof TypeError||e instanceof eS||e instanceof ek)throw e;a=th(p)}if(void 0!==e.iv)try{s=eg(e.iv)}catch{throw new eS("Failed to base64url decode the iv")}if(void 0!==e.tag)try{o=eg(e.tag)}catch{throw new eS("Failed to base64url decode the tag")}let y=ec.encode(e.protected??"");c=void 0!==e.aad?ed(y,ec.encode("."),ec.encode(e.aad)):y;try{l=eg(e.ciphertext)}catch{throw new eS("Failed to base64url decode the ciphertext")}let g={plaintext:await eG(p,a,l,s,o,c)};if(void 0!==e.protected&&(g.protectedHeader=n),void 0!==e.aad)try{g.additionalAuthenticatedData=eg(e.aad)}catch{throw new eS("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(g.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(g.unprotectedHeader=e.header),m)?{...g,key:t}:g}async function tE(e,t,r){if(e instanceof Uint8Array&&(e=el.decode(e)),"string"!=typeof e)throw new eS("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:s,4:o,length:c}=e.split(".");if(5!==c)throw new eS("Invalid Compact JWE");let l=await tA({ciphertext:s,iv:a||void 0,protected:n,tag:o||void 0,encrypted_key:i||void 0},t,r),d={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return"function"==typeof t?{...d,key:l.key}:d}let tT=e=>{let t;if(eM(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=es.KeyObject.from(e)}else if(e$(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:ey(e)};else throw TypeError(ez(e,...eq,"Uint8Array"));if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new ek("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})};async function tC(e){return tT(e)}async function tP(e,t,r,n,i={}){let a,s,o;switch(t_(e,r,"encrypt"),e){case"dir":o=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!e9(r))throw new ek("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:l}=i,{epk:d}=i;d||=(await e3(r)).privateKey;let{x:u,y:p,crv:h,kty:f}=await tC(d),m=await e6(r,d,"ECDH-ES"===e?t:e,"ECDH-ES"===e?tp(t):parseInt(e.slice(-5,-2),10),c,l);if(s={epk:{x:u,crv:h,kty:f}},"EC"===f&&(s.epk.y=p),c&&(s.apu=ey(c)),l&&(s.apv=ey(l)),"ECDH-ES"===e){o=m;break}o=n||th(t);let y=e.slice(-6);a=await e1(y,m,o);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o=n||th(t),a=await td(e,r,o);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{o=n||th(t);let{p2c:c,p2s:l}=i;({encryptedKey:a,...s}=await tr(e,r,o,c,l));break}case"A128KW":case"A192KW":case"A256KW":o=n||th(t),a=await e1(e,r,o);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{o=n||th(t);let{iv:c}=i;({encryptedKey:a,...s}=await tv(e,r,o,c));break}default:throw new ek('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:o,encryptedKey:a,parameters:s}}let tR=Symbol();class tO{_plaintext;_protectedHeader;_sharedUnprotectedHeader;_unprotectedHeader;_aad;_cek;_iv;_keyManagementParameters;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let r,n,i,a,s;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new eS("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!eX(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new eS("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let o={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(tx(eS,new Map,t?.crit,this._protectedHeader,o),void 0!==o.zip)throw new ek('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:l}=o;if("string"!=typeof c||!c)throw new eS('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new eS('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);{let i;({cek:n,encryptedKey:r,parameters:i}=await tP(c,l,e,this._cek,this._keyManagementParameters)),i&&(t&&tR in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...i}:this.setUnprotectedHeader(i):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...i}:this.setProtectedHeader(i))}a=this._protectedHeader?ec.encode(ey(JSON.stringify(this._protectedHeader))):ec.encode(""),this._aad?(s=ey(this._aad),i=ed(a,ec.encode("."),ec.encode(s))):i=a;let{ciphertext:d,tag:u,iv:p}=await tw(l,this._plaintext,n,this._iv,i),h={ciphertext:ey(d)};return p&&(h.iv=ey(p)),u&&(h.tag=ey(u)),r&&(h.encrypted_key=ey(r)),s&&(h.aad=s),this._protectedHeader&&(h.protected=el.decode(a)),this._sharedUnprotectedHeader&&(h.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(h.header=this._unprotectedHeader),h}}es.constants.RSA_PKCS1_PSS_PADDING,es.constants.RSA_PSS_SALTLEN_DIGEST,(0,ej.promisify)(es.sign),(0,ej.promisify)(es.verify);let tU=e=>Math.floor(e.getTime()/1e3),tI=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,tj=e=>{let t;let r=tI.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(31557600*n)}return"-"===r[1]||"ago"===r[4]?-t:t},t$=e=>e.toLowerCase().replace(/^application\//,""),tH=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),tN=(e,t,r={})=>{let n,i;let{typ:a}=r;if(a&&("string"!=typeof e.typ||t$(e.typ)!==t$(a)))throw new ew('unexpected "typ" JWT header value',"typ","check_failed");try{n=JSON.parse(el.decode(t))}catch{}if(!eY(n))throw new eA("JWT Claims Set must be a top-level JSON object");let{requiredClaims:s=[],issuer:o,subject:c,audience:l,maxTokenAge:d}=r,u=[...s];for(let e of(void 0!==d&&u.push("iat"),void 0!==l&&u.push("aud"),void 0!==c&&u.push("sub"),void 0!==o&&u.push("iss"),new Set(u.reverse())))if(!(e in n))throw new ew(`missing required "${e}" claim`,e,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(n.iss))throw new ew('unexpected "iss" claim value',"iss","check_failed");if(c&&n.sub!==c)throw new ew('unexpected "sub" claim value',"sub","check_failed");if(l&&!tH(n.aud,"string"==typeof l?[l]:l))throw new ew('unexpected "aud" claim value',"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=tj(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:p}=r,h=tU(p||new Date);if((void 0!==n.iat||d)&&"number"!=typeof n.iat)throw new ew('"iat" claim must be a number',"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new ew('"nbf" claim must be a number',"nbf","invalid");if(n.nbf>h+i)throw new ew('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new ew('"exp" claim must be a number',"exp","invalid");if(n.exp<=h-i)throw new ev('"exp" claim timestamp check failed',"exp","check_failed")}if(d){let e=h-n.iat;if(e-i>("number"==typeof d?d:tj(d)))throw new ev('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-i)throw new ew('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return n};async function tL(e,t,r){let n=await tE(e,t,r),i=tN(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(void 0!==a.iss&&a.iss!==i.iss)throw new ew('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==a.sub&&a.sub!==i.sub)throw new ew('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==a.aud&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new ew('replicated "aud" claim header parameter mismatch',"aud","mismatch");let s={payload:i,protectedHeader:a};return"function"==typeof t?{...s,key:n.key}:s}class tD{_flattened;constructor(e){this._flattened=new tO(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}function tM(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class tW{_payload;constructor(e={}){if(!eY(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:tM("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:tM("setNotBefore",tU(e))}:this._payload={...this._payload,nbf:tU(new Date)+tj(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:tM("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:tM("setExpirationTime",tU(e))}:this._payload={...this._payload,exp:tU(new Date)+tj(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:tU(new Date)}:e instanceof Date?this._payload={...this._payload,iat:tM("setIssuedAt",tU(e))}:"string"==typeof e?this._payload={...this._payload,iat:tM("setIssuedAt",tU(new Date)+tj(e))}:this._payload={...this._payload,iat:tM("setIssuedAt",e)},this}}class tK extends tW{_cek;_iv;_keyManagementParameters;_protectedHeader;_replicateIssuerAsHeader;_replicateSubjectAsHeader;_replicateAudienceAsHeader;setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new tD(ec.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}let tJ=(e,t)=>{if("string"!=typeof e||!e)throw new eE(`${t} missing or invalid`)};async function tZ(e,t){let r;if(!eY(e))throw TypeError("JWK must be an object");if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":tJ(e.crv,'"crv" (Curve) Parameter'),tJ(e.x,'"x" (X Coordinate) Parameter'),tJ(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":tJ(e.crv,'"crv" (Subtype of Key Pair) Parameter'),tJ(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":tJ(e.e,'"e" (Exponent) Parameter'),tJ(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":tJ(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new ek('"kty" (Key Type) Parameter missing or unsupported')}let n=ec.encode(JSON.stringify(r));return ey(await eo(t,n))}function tz(e){return eY(e)}async function tV(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(void 0===n[r]){let e=await tm({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new eT("JSON Web Key Set members must be public keys");n[r]=e}return n[r]}var tB=r(88849),tF=r(22286),tq=r(15673);"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 "),(0,ej.promisify)(es.generateKeyPair);var tG=r(43183);let tX=()=>Date.now()/1e3|0,tY="A256CBC-HS512";async function tQ(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i}=e,a=Array.isArray(r)?r:[r],s=await t1(tY,a[0],i),o=await tZ({kty:"oct",k:ey(s)},`sha${s.byteLength<<3}`);return await new tK(t).setProtectedHeader({alg:"dir",enc:tY,kid:o}).setIssuedAt().setExpirationTime(tX()+n).setJti(crypto.randomUUID()).encrypt(s)}async function t0(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:a}=await tL(t,async({kid:e,enc:t})=>{for(let r of i){let i=await t1(t,r,n);if(void 0===e||e===await tZ({kty:"oct",k:ey(i)},`sha${i.byteLength<<3}`))return i}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[tY,"A256GCM"]});return a}async function t1(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await ei("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function t2({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,a=n.origin;return t?a=await i.redirect({url:t,baseUrl:n.origin}):r&&(a=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:a,callbackUrlCookie:a!==r?a:void 0}}let t5="\x1b[31m",t4="\x1b[0m",t8={error(e){let t=e instanceof u?e.type:e.name;if(console.error(`${t5}[auth][error]${t4} ${t}: ${e.message}`),e.cause&&"object"==typeof e.cause&&"err"in e.cause&&e.cause.err instanceof Error){let{err:t,...r}=e.cause;console.error(`${t5}[auth][cause]${t4}:`,t.stack),r&&console.error(`${t5}[auth][details]${t4}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){let t=`https://warnings.authjs.dev#${e}`;console.warn(`\x1b[33m[auth][warn][${e}]${t4}`,`Read more: ${t}`)},debug(e,t){console.log(`\x1b[90m[auth][debug]:${t4} ${e}`,JSON.stringify(t,null,2))}},t6=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"];async function t3(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function t9(e,t){try{if("GET"!==e.method&&"POST"!==e.method)throw new j("Only GET and POST requests are supported.");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=function(e,t){let r=e.match(RegExp(`^${t}(.+)`));if(null===r)throw new j(`Cannot parse action at ${e}`);let[n,i]=r,a=i.replace(/^\//,"").split("/");if(1!==a.length&&2!==a.length)throw new j(`Cannot parse action at ${e}`);let[s,o]=a;if(!t6.includes(s)||o&&!["signin","callback","webauthn-options"].includes(s))throw new j(`Cannot parse action at ${e}`);return{action:s,providerId:o}}(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await t3(e):void 0,cookies:(0,tG.Q)(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(t){t8.error(t),t8.debug("request",e)}}function t7(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:i}=e,a=tG.q(r,n,i);t.has("Set-Cookie")?t.append("Set-Cookie",a):t.set("Set-Cookie",a)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function re(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function rt(e){let t=e=>("0"+e.toString(16)).slice(-2);return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce((e,r)=>e+t(r),"")}async function rr({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[i,a]=t.split("|");if(a===await re(`${i}${e.secret}`))return{csrfTokenVerified:r&&i===n,csrfToken:i}}let i=rt(32),a=await re(`${i}${e.secret}`);return{cookie:`${i}|${a}`,csrfToken:i}}function rn(e,t){if(!t)throw new D(`CSRF token was missing during an action ${e}.`)}function ri(e){return e&&"object"==typeof e&&!Array.isArray(e)}function ra(e,...t){if(!t.length)return e;let r=t.shift();if(ri(e)&&ri(r))for(let t in r)ri(r[t])?(e[t]||Object.assign(e,{[t]:{}}),ra(e[t],r[t])):Object.assign(e,{[t]:r[t]});return ra(e,...t)}let rs=e=>rc({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),ro=e=>rc({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function rc(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function rl(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform}}let rd={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function ru({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:a,csrfToken:s,csrfDisabled:o,isPost:c}){var d;let{providers:u,provider:p}=function(e){let{providerId:t,options:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),i=e.providers.map(e=>{let t="function"==typeof e?e():e,{options:i,...a}=t,s=i?.id??a.id,o=ra(a,i,{signinUrl:`${n}/signin/${s}`,callbackUrl:`${n}/callback/${s}`});return"oauth"===t.type||"oidc"===t.type?(o.redirectProxyUrl??(o.redirectProxyUrl=r.redirectProxyUrl),function(e){e.issuer&&(e.wellKnown??(e.wellKnown=`${e.issuer}/.well-known/openid-configuration`));let t=rl(e.authorization,e.issuer);t&&!t.url?.searchParams.has("scope")&&t.url.searchParams.set("scope","openid profile email");let r=rl(e.token,e.issuer),n=rl(e.userinfo,e.issuer),i=e.checks??["pkce"];return e.redirectProxyUrl&&(i.includes("state")||i.push("state"),e.redirectProxyUrl=`${e.redirectProxyUrl}/callback/${e.id}`),{...e,authorization:t,token:r,checks:i,userinfo:n,profile:e.profile??rs,account:e.account??ro}}(o)):o});return{providers:i,provider:i.find(({id:e})=>e===t)}}({providers:e.providers,url:n,providerId:t,options:e}),f=!1;if((p?.type==="oauth"||p?.type==="oidc")&&p.redirectProxyUrl)try{f=new URL(p.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${p.redirectProxyUrl}`)}let m={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:p,cookies:ra(l(e.useSecureCookies??"https:"===n.protocol),e.cookies),providers:u,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:tQ,decode:t0,...e.jwt},events:Object.keys(d=e.events??{}).reduce((e,t)=>(e[t]=async(...e)=>{try{let r=d[t];return await r(...e)}catch(e){t8.error(new g(e))}},e),{}),adapter:function(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let i=e[n];return await i(...r)}catch(r){let e=new h(r);throw t.error(e),e}},r),{})}(e.adapter,t8),callbacks:{...rd,...e.callbacks},logger:t8,callbackUrl:n.origin,isOnRedirectProxy:f,experimental:{...e.experimental}},y=[];if(o)m.csrfTokenVerified=!0;else{let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await rr({options:m,cookieValue:i?.[m.cookies.csrfToken.name],isPost:c,bodyValue:s});m.csrfToken=e,m.csrfTokenVerified=r,t&&y.push({name:m.cookies.csrfToken.name,value:t,options:m.cookies.csrfToken.options})}let{callbackUrl:_,callbackUrlCookie:w}=await t2({options:m,cookieValue:i?.[m.cookies.callbackUrl.name],paramValue:a});return m.callbackUrl=_,w&&y.push({name:m.cookies.callbackUrl.name,value:w,options:m.cookies.callbackUrl.options}),{options:m,cookies:y}}var rp,rh,rf,rm,ry,rg,r_,rw,rv,rb,rk,rx={},rS=[],rA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function rE(e,t){for(var r in t)e[r]=t[r];return e}function rT(e){var t=e.parentNode;t&&t.removeChild(e)}function rC(e,t,r,n,i){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++rv:i};return null==i&&null!=rw.vnode&&rw.vnode(a),a}function rP(e){return e.children}function rR(e,t){this.props=e,this.context=t}function rO(e,t){if(null==t)return e.__?rO(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?rO(e):null}function rU(e){(!e.__d&&(e.__d=!0)&&rb.push(e)&&!rI.__r++||rk!==rw.debounceRendering)&&((rk=rw.debounceRendering)||setTimeout)(rI)}function rI(){for(var e;rI.__r=rb.length;)e=rb.sort(function(e,t){return e.__v.__b-t.__v.__b}),rb=[],e.some(function(e){var t,r,n,i,a;e.__d&&(i=(n=e.__v).__e,(a=e.__P)&&(t=[],(r=rE({},n)).__v=n.__v+1,rM(a,n,r,e.__n,void 0!==a.ownerSVGElement,null!=n.__h?[i]:null,t,null==i?rO(n):i,n.__h),rW(t,n),n.__e!=i&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)))})}function rj(e,t,r,n,i,a,s,o,c,l){var d,u,p,h,f,m,y,g=n&&n.__k||rS,_=g.length;for(r.__k=[],d=0;d<t.length;d++)if(null!=(h=r.__k[d]=null==(h=t[d])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h||"bigint"==typeof h?rC(null,h,null,null,h):Array.isArray(h)?rC(rP,{children:h},null,null,null):h.__b>0?rC(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)){if(h.__=r,h.__b=r.__b+1,null===(p=g[d])||p&&h.key==p.key&&h.type===p.type)g[d]=void 0;else for(u=0;u<_;u++){if((p=g[u])&&h.key==p.key&&h.type===p.type){g[u]=void 0;break}p=null}rM(e,h,p=p||rx,i,a,s,o,c,l),f=h.__e,(u=h.ref)&&p.ref!=u&&(y||(y=[]),p.ref&&y.push(p.ref,null,h),y.push(u,h.__c||f,h)),null!=f?(null==m&&(m=f),"function"==typeof h.type&&h.__k===p.__k?h.__d=c=function e(t,r,n){for(var i,a=t.__k,s=0;a&&s<a.length;s++)(i=a[s])&&(i.__=t,r="function"==typeof i.type?e(i,r,n):r$(n,i,i,a,i.__e,r));return r}(h,c,e):c=r$(e,h,p,g,f,c),"function"==typeof r.type&&(r.__d=c)):c&&p.__e==c&&c.parentNode!=e&&(c=rO(p))}for(r.__e=m,d=_;d--;)null!=g[d]&&function e(t,r,n){var i,a;if(rw.unmount&&rw.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||rK(i,null,r)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){rw.__e(e,r)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&e(i[a],r,n||"function"!=typeof t.type);n||null==t.__e||rT(t.__e),t.__=t.__e=t.__d=void 0}(g[d],g[d]);if(y)for(d=0;d<y.length;d++)rK(y[d],y[++d],y[++d])}function r$(e,t,r,n,i,a){var s,o,c;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==r||i!=a||null==i.parentNode)e:if(null==a||a.parentNode!==e)e.appendChild(i),s=null;else{for(o=a,c=0;(o=o.nextSibling)&&c<n.length;c+=1)if(o==i)break e;e.insertBefore(i,a),s=a}return void 0!==s?s:i.nextSibling}function rH(e,t,r){"-"===t[0]?e.setProperty(t,r):e[t]=null==r?"":"number"!=typeof r||rA.test(t)?r:r+"px"}function rN(e,t,r,n,i){var a;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||rH(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||rH(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase() in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n||e.addEventListener(t,a?rD:rL,a):e.removeEventListener(t,a?rD:rL,a);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,r))}}function rL(e){this.l[e.type+!1](rw.event?rw.event(e):e)}function rD(e){this.l[e.type+!0](rw.event?rw.event(e):e)}function rM(e,t,r,n,i,a,s,o,c){var l,d,u,p,h,f,m,y,g,_,w,v,b,k,x,S=t.type;if(void 0!==t.constructor)return null;null!=r.__h&&(c=r.__h,o=t.__e=r.__e,t.__h=null,a=[o]),(l=rw.__b)&&l(t);try{e:if("function"==typeof S){if(y=t.props,g=(l=S.contextType)&&n[l.__c],_=l?g?g.props.value:l.__:n,r.__c?m=(d=t.__c=r.__c).__=d.__E:("prototype"in S&&S.prototype.render?t.__c=d=new S(y,_):(t.__c=d=new rR(y,_),d.constructor=S,d.render=rJ),g&&g.sub(d),d.props=y,d.state||(d.state={}),d.context=_,d.__n=n,u=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=S.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=rE({},d.__s)),rE(d.__s,S.getDerivedStateFromProps(y,d.__s))),p=d.props,h=d.state,u)null==S.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==S.getDerivedStateFromProps&&y!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,_),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,_)||t.__v===r.__v){for(d.props=y,d.state=d.__s,t.__v!==r.__v&&(d.__d=!1),d.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(e){e&&(e.__=t)}),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,_),null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,h,f)})}if(d.context=_,d.props=y,d.__v=t,d.__P=e,v=rw.__r,b=0,"prototype"in S&&S.prototype.render){for(d.state=d.__s,d.__d=!1,v&&v(t),l=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do d.__d=!1,v&&v(t),l=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++b<25);d.state=d.__s,null!=d.getChildContext&&(n=rE(rE({},n),d.getChildContext())),u||null==d.getSnapshotBeforeUpdate||(f=d.getSnapshotBeforeUpdate(p,h)),x=null!=l&&l.type===rP&&null==l.key?l.props.children:l,rj(e,Array.isArray(x)?x:[x],t,r,n,i,a,s,o,c),d.base=t.__e,t.__h=null,d.__h.length&&s.push(d),m&&(d.__E=d.__=null),d.__e=!1}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,i,a,s,o){var c,l,d,u=r.props,p=t.props,h=t.type,f=0;if("svg"===h&&(i=!0),null!=a){for(;f<a.length;f++)if((c=a[f])&&"setAttribute"in c==!!h&&(h?c.localName===h:3===c.nodeType)){e=c,a[f]=null;break}}if(null==e){if(null===h)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,p.is&&p),a=null,o=!1}if(null===h)u===p||o&&e.data===p||(e.data=p);else{if(a=a&&r_.call(e.childNodes),l=(u=r.props||rx).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!o){if(null!=a)for(u={},f=0;f<e.attributes.length;f++)u[e.attributes[f].name]=e.attributes[f].value;(d||l)&&(d&&(l&&d.__html==l.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,r,n,i){var a;for(a in r)"children"===a||"key"===a||a in t||rN(e,a,null,r[a],n);for(a in t)i&&"function"!=typeof t[a]||"children"===a||"key"===a||"value"===a||"checked"===a||r[a]===t[a]||rN(e,a,t[a],r[a],n)}(e,p,u,i,o),d)t.__k=[];else if(rj(e,Array.isArray(f=t.props.children)?f:[f],t,r,n,i&&"foreignObject"!==h,a,s,a?a[0]:r.__k&&rO(r,0),o),null!=a)for(f=a.length;f--;)null!=a[f]&&rT(a[f]);o||("value"in p&&void 0!==(f=p.value)&&(f!==e.value||"progress"===h&&!f||"option"===h&&f!==u.value)&&rN(e,"value",f,u.value,!1),"checked"in p&&void 0!==(f=p.checked)&&f!==e.checked&&rN(e,"checked",f,u.checked,!1))}return e}(r.__e,t,r,n,i,a,s,c);(l=rw.diffed)&&l(t)}catch(e){t.__v=null,(c||null!=a)&&(t.__e=o,t.__h=!!c,a[a.indexOf(o)]=null),rw.__e(e,t,r)}}function rW(e,t){rw.__c&&rw.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){rw.__e(e,t.__v)}})}function rK(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){rw.__e(e,r)}}function rJ(e,t,r){return this.constructor(e,r)}function rZ(e,t){var r,n,i,a;r=e,rw.__&&rw.__(r,t),i=(n="function"==typeof rZ)?null:rZ&&rZ.__k||t.__k,a=[],rM(t,r=(!n&&rZ||t).__k=function(e,t,r){var n,i,a,s={};for(a in t)"key"==a?n=t[a]:"ref"==a?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?r_.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return rC(e,s,n,i,null)}(rP,null,[r]),i||rx,rx,void 0!==t.ownerSVGElement,!n&&rZ?[rZ]:i?null:t.firstChild?r_.call(t.childNodes):null,a,!n&&rZ?rZ:i?i.__e:t.firstChild,n),rW(a,r)}r_=rS.slice,rw={__e:function(e,t,r,n){for(var i,a,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},rv=0,rR.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=rE({},this.state),"function"==typeof e&&(e=e(rE({},r),this.props)),e&&rE(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),rU(this))},rR.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rU(this))},rR.prototype.render=rP,rb=[],rI.__r=0;var rz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,rV=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,rB=/[\s\n\\/='"\0<>]/,rF=/^xlink:?./,rq=/["&<]/;function rG(e){if(!1===rq.test(e+=""))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var rX=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"	"))},rY=function(e,t,r){return String(e).length>(t||40)||!r&&-1!==String(e).indexOf("\n")||-1!==String(e).indexOf("<")},rQ={},r0=/([A-Z])/g;function r1(e){var t="";for(var r in e){var n=e[r];null!=n&&""!==n&&(t&&(t+=" "),t+="-"==r[0]?r:rQ[r]||(rQ[r]=r.replace(r0,"-$1").toLowerCase()),t="number"==typeof n&&!1===rz.test(r)?t+": "+n+"px;":t+": "+n+";")}return t||void 0}function r2(e,t){return Array.isArray(t)?t.reduce(r2,e):null!=t&&!1!==t&&e.push(t),e}function r5(){this.__d=!0}function r4(e,t){return{__v:e,context:t,props:e.props,setState:r5,forceUpdate:r5,__d:!0,__h:[]}}function r8(e,t){var r=e.contextType,n=r&&t[r.__c];return null!=r?n?n.props.value:r.__:t}var r6=[],r3={shallow:!0};r7.render=r7;var r9=[];function r7(e,t,r){t=t||{};var n,i=rw.__s;return rw.__s=!0,n=r&&(r.pretty||r.voidElements||r.sortAttributes||r.shallow||r.allAttributes||r.xml||r.attributeHook)?function e(t,r,n,i,a,s){if(null==t||"boolean"==typeof t)return"";if("object"!=typeof t)return rG(t);var o=n.pretty,c=o&&"string"==typeof o?o:"	";if(Array.isArray(t)){for(var l="",d=0;d<t.length;d++)o&&d>0&&(l+="\n"),l+=e(t[d],r,n,i,a,s);return l}var u,p=t.type,h=t.props,f=!1;if("function"==typeof p){if(f=!0,!n.shallow||!i&&!1!==n.renderRootComponent){if(p===rP){var m=[];return r2(m,t.props.children),e(m,r,n,!1!==n.shallowHighOrder,a,s)}var y,g=t.__c=r4(t,r);rw.__b&&rw.__b(t);var _=rw.__r;if(p.prototype&&"function"==typeof p.prototype.render){var w=r8(p,r);(g=t.__c=new p(h,w)).__v=t,g._dirty=g.__d=!0,g.props=h,null==g.state&&(g.state={}),null==g._nextState&&null==g.__s&&(g._nextState=g.__s=g.state),g.context=w,p.getDerivedStateFromProps?g.state=Object.assign({},g.state,p.getDerivedStateFromProps(g.props,g.state)):g.componentWillMount&&(g.componentWillMount(),g.state=g._nextState!==g.state?g._nextState:g.__s!==g.state?g.__s:g.state),_&&_(t),y=g.render(g.props,g.state,g.context)}else for(var v=r8(p,r),b=0;g.__d&&b++<25;)g.__d=!1,_&&_(t),y=p.call(t.__c,h,v);return g.getChildContext&&(r=Object.assign({},r,g.getChildContext())),rw.diffed&&rw.diffed(t),e(y,r,n,!1!==n.shallowHighOrder,a,s)}p=(u=p).displayName||u!==Function&&u.name||function(e){var t=(Function.prototype.toString.call(e).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!t){for(var r=-1,n=r6.length;n--;)if(r6[n]===e){r=n;break}r<0&&(r=r6.push(e)-1),t="UnnamedComponent"+r}return t}(u)}var k,x,S="<"+p;if(h){var A=Object.keys(h);n&&!0===n.sortAttributes&&A.sort();for(var E=0;E<A.length;E++){var T=A[E],C=h[T];if("children"!==T){if(!rB.test(T)&&(n&&n.allAttributes||"key"!==T&&"ref"!==T&&"__self"!==T&&"__source"!==T)){if("defaultValue"===T)T="value";else if("defaultChecked"===T)T="checked";else if("defaultSelected"===T)T="selected";else if("className"===T){if(void 0!==h.class)continue;T="class"}else a&&rF.test(T)&&(T=T.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===T){if(h.for)continue;T="for"}"style"===T&&C&&"object"==typeof C&&(C=r1(C)),"a"===T[0]&&"r"===T[1]&&"boolean"==typeof C&&(C=String(C));var P=n.attributeHook&&n.attributeHook(T,C,r,n,f);if(P||""===P)S+=P;else if("dangerouslySetInnerHTML"===T)x=C&&C.__html;else if("textarea"===p&&"value"===T)k=C;else if((C||0===C||""===C)&&"function"!=typeof C){if(!(!0!==C&&""!==C||(C=T,n&&n.xml))){S=S+" "+T;continue}if("value"===T){if("select"===p){s=C;continue}"option"===p&&s==C&&void 0===h.selected&&(S+=" selected")}S=S+" "+T+'="'+rG(C)+'"'}}}else k=C}}if(o){var R=S.replace(/\n\s*/," ");R===S||~R.indexOf("\n")?o&&~S.indexOf("\n")&&(S+="\n"):S=R}if(S+=">",rB.test(p))throw Error(p+" is not a valid HTML tag name in "+S);var O,U=rV.test(p)||n.voidElements&&n.voidElements.test(p),I=[];if(x)o&&rY(x)&&(x="\n"+c+rX(x,c)),S+=x;else if(null!=k&&r2(O=[],k).length){for(var j=o&&~S.indexOf("\n"),$=!1,H=0;H<O.length;H++){var N=O[H];if(null!=N&&!1!==N){var L=e(N,r,n,!0,"svg"===p||"foreignObject"!==p&&a,s);if(o&&!j&&rY(L)&&(j=!0),L){if(o){var D=L.length>0&&"<"!=L[0];$&&D?I[I.length-1]+=L:I.push(L),$=D}else I.push(L)}}}if(o&&j)for(var M=I.length;M--;)I[M]="\n"+c+rX(I[M],c)}if(I.length||x)S+=I.join("");else if(n&&n.xml)return S.substring(0,S.length-1)+" />";return!U||O||x?(o&&~S.indexOf("\n")&&(S+="\n"),S=S+"</"+p+">"):S=S.replace(/>$/," />"),S}(e,t,r):function e(t,r,n,i){if(null==t||!0===t||!1===t||""===t)return"";if("object"!=typeof t)return rG(t);if(ne(t)){for(var a="",s=0;s<t.length;s++)a+=e(t[s],r,n,i);return a}rw.__b&&rw.__b(t);var o=t.type,c=t.props;if("function"==typeof o){if(o===rP)return e(t.props.children,r,n,i);f=o.prototype&&"function"==typeof o.prototype.render?(l=r,u=r8(d=t.type,l),p=new d(t.props,u),t.__c=p,p.__v=t,p.__d=!0,p.props=t.props,null==p.state&&(p.state={}),null==p.__s&&(p.__s=p.state),p.context=u,d.getDerivedStateFromProps?p.state=nt({},p.state,d.getDerivedStateFromProps(p.props,p.state)):p.componentWillMount&&(p.componentWillMount(),p.state=p.__s!==p.state?p.__s:p.state),(h=rw.__r)&&h(t),p.render(p.props,p.state,p.context)):function(e,t){var r,n=r4(e,t),i=r8(e.type,t);e.__c=n;for(var a=rw.__r,s=0;n.__d&&s++<25;)n.__d=!1,a&&a(e),r=e.type.call(n,e.props,i);return r}(t,r);var l,d,u,p,h,f,m=t.__c;m.getChildContext&&(r=nt({},r,m.getChildContext()));var y=e(f,r,n,i);return rw.diffed&&rw.diffed(t),y}var g,_,w="<";if(w+=o,c)for(var v in g=c.children,c){var b,k,x,S=c[v];if(!("key"===v||"ref"===v||"__self"===v||"__source"===v||"children"===v||"className"===v&&"class"in c||"htmlFor"===v&&"for"in c||rB.test(v))){if(k=v="className"===(b=v)?"class":"htmlFor"===b?"for":"defaultValue"===b?"value":"defaultChecked"===b?"checked":"defaultSelected"===b?"selected":n&&rF.test(b)?b.toLowerCase().replace(/^xlink:?/,"xlink:"):b,x=S,S="style"===k&&null!=x&&"object"==typeof x?r1(x):"a"===k[0]&&"r"===k[1]&&"boolean"==typeof x?String(x):x,"dangerouslySetInnerHTML"===v)_=S&&S.__html;else if("textarea"===o&&"value"===v)g=S;else if((S||0===S||""===S)&&"function"!=typeof S){if(!0===S||""===S){S=v,w=w+" "+v;continue}if("value"===v){if("select"===o){i=S;continue}"option"!==o||i!=S||"selected"in c||(w+=" selected")}w=w+" "+v+'="'+rG(S)+'"'}}}var A=w;if(w+=">",rB.test(o))throw Error(o+" is not a valid HTML tag name in "+w);var E="",T=!1;if(_)E+=_,T=!0;else if("string"==typeof g)E+=rG(g),T=!0;else if(ne(g))for(var C=0;C<g.length;C++){var P=g[C];if(null!=P&&!1!==P){var R=e(P,r,"svg"===o||"foreignObject"!==o&&n,i);R&&(E+=R,T=!0)}}else if(null!=g&&!1!==g&&!0!==g){var O=e(g,r,"svg"===o||"foreignObject"!==o&&n,i);O&&(E+=O,T=!0)}if(rw.diffed&&rw.diffed(t),T)w+=E;else if(rV.test(o))return A+" />";return w+"</"+o+">"}(e,t,!1,void 0),rw.__c&&rw.__c(e,r9),rw.__s=i,r9.length=0,n}var ne=Array.isArray,nt=Object.assign;r7.shallowRender=function(e,t){return r7(e,t,r3)};var nr=0;function nn(e,t,r,n,i){var a,s,o={};for(s in t)"ref"==s?a=t[s]:o[s]=t[s];var c={type:e,props:o,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--nr,__source:i,__self:n};if("function"==typeof e&&(a=e.defaultProps))for(s in a)void 0===o[s]&&(o[s]=a[s]);return rw.vnode&&rw.vnode(c),c}async function ni(e,t){let r=window.SimpleWebAuthnBrowser;async function n(r){let n=new URL(`${e}/webauthn-options/${t}`);r&&n.searchParams.append("action",r),a().forEach(e=>{n.searchParams.append(e.name,e.value)});let i=await fetch(n);if(!i.ok){console.error("Failed to fetch options",i);return}return i.json()}function i(){let e=`#${t}-form`,r=document.querySelector(e);if(!r)throw Error(`Form '${e}' not found`);return r}function a(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function s(e,t){let r=i();if(e){let t=document.createElement("input");t.type="hidden",t.name="action",t.value=e,r.appendChild(t)}if(t){let e=document.createElement("input");e.type="hidden",e.name="data",e.value=JSON.stringify(t),r.appendChild(e)}return r.submit()}async function o(e,t){let n=await r.startAuthentication(e,t);return await s("authenticate",n)}async function c(e){a().forEach(e=>{if(e.required&&!e.value)throw Error(`Missing required field: ${e.name}`)});let t=await r.startRegistration(e);return await s("register",t)}async function l(){if(!r.browserSupportsWebAuthnAutofill())return;let e=await n("authenticate");if(!e){console.error("Failed to fetch option for autofill authentication");return}try{await o(e.options,!0)}catch(e){console.error(e)}}(async function(){let e=i();if(!r.browserSupportsWebAuthn()){e.style.display="none";return}e&&e.addEventListener("submit",async e=>{e.preventDefault();let t=await n(void 0);if(!t){console.error("Failed to fetch options for form submission");return}if("authenticate"===t.action)try{await o(t.options,!1)}catch(e){console.error(e)}else if("register"===t.action)try{await c(t.options)}catch(e){console.error(e)}})})(),l()}let na={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."};function ns(e,t=1){if(!e)return;3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let r=parseInt(e,16);return t=Math.min(Math.max(t,0),1),`rgba(${r>>16&255}, ${r>>8&255}, ${255&r}, ${t})`}let no=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
}

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
  }

  button,
  a.button {
    color: var(--provider-dark-color, var(--color-primary));
    background-color: var(--provider-dark-bg, var(--color-background));
  }
    :is(button,a.button):hover {
      background-color: var(
        --provider-dark-bg-hover,
        var(--color-background-hover)
      ) !important;
    }
  #provider-logo {
    display: none !important;
  }
  #provider-logo-dark {
    width: 25px;
    display: block !important;
  }
}
html {
  box-sizing: border-box;
}
*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

input[type]:focus {
    box-shadow: none;
  }

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button span {
  flex-grow: 1;
}

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg);
  font-size: 1.1rem;
  min-height: 62px;
  border-color: rgba(0, 0, 0, 0.1);
  border-radius: var(--border-radius);
  transition: all 0.1s ease-in-out;
  font-weight: 500;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) #provider-logo {
    width: 25px;
    display: block;
  }

:is(button,a.button) #provider-logo-dark {
    display: none;
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 2rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}
@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function nc({html:e,title:t,status:r,cookies:n,theme:i,headTags:a}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${no}</style><title>${t}</title>${a??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${r7(e)}</div></body></html>`}}function nl(e){let{url:t,theme:r,query:n,cookies:i,pages:a,providers:s}=e;return{csrf:(e,t,r)=>e?(t.logger.warn("csrf-disabled"),r.push({name:t.cookies.csrfToken.name,value:"",options:{...t.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:r}):{headers:{"Content-Type":"application/json"},body:{csrfToken:t.csrfToken},cookies:r},providers:e=>({headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:a})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:a},e),{})}),signin(t,o){if(t)throw new j("Unsupported action");if(a?.signIn){let t=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return o&&(t=`${t}&${new URLSearchParams({error:o})}`),{redirect:t,cookies:i}}let c=s?.find(e=>"webauthn"===e.type&&e.enableConditionalUI&&!!e.simpleWebAuthnBrowserVersion),l="";if(c){let{simpleWebAuthnBrowserVersion:e}=c;l=`<script src="https://unpkg.com/@simplewebauthn/browser@${e}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return nc({cookies:i,theme:r,html:function(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:i,email:a,error:s}=e;"undefined"!=typeof document&&i?.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor),"undefined"!=typeof document&&i?.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText);let o=s&&(na[s]??na.default),c="https://authjs.dev/img/providers",l=r.find(e=>"webauthn"===e.type&&e.enableConditionalUI)?.id;return nn("div",{className:"signin",children:[i?.brandColor&&nn("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${i.brandColor}}`}}),i?.buttonText&&nn("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),nn("div",{className:"card",children:[o&&nn("div",{className:"error",children:nn("p",{children:o})}),i?.logo&&nn("img",{src:i.logo,alt:"Logo",className:"logo"}),r.map((e,i)=>{let s,o,l,d,u,p;return("oauth"===e.type||"oidc"===e.type)&&({bg:s="",text:o="",logo:l="",bgDark:u=s,textDark:p=o,logoDark:d=""}=e.style??{},l=l.startsWith("/")?c+l:l,(d=d.startsWith("/")?c+d:d||l)||(d=l)),nn("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?nn("form",{action:e.signinUrl,method:"POST",children:[nn("input",{type:"hidden",name:"csrfToken",value:t}),n&&nn("input",{type:"hidden",name:"callbackUrl",value:n}),nn("button",{type:"submit",className:"button",style:{"--provider-bg":s,"--provider-dark-bg":u,"--provider-color":o,"--provider-dark-color":p,"--provider-bg-hover":ns(s,.8),"--provider-dark-bg-hover":ns(u,.8)},tabIndex:0,children:[l&&nn("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:l}),d&&nn("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:d}),nn("span",{children:["Sign in with ",e.name]})]})]}):null,("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i>0&&"email"!==r[i-1].type&&"credentials"!==r[i-1].type&&"webauthn"!==r[i-1].type&&nn("hr",{}),"email"===e.type&&nn("form",{action:e.signinUrl,method:"POST",children:[nn("input",{type:"hidden",name:"csrfToken",value:t}),nn("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),nn("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:a,placeholder:"email@example.com",required:!0}),nn("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"credentials"===e.type&&nn("form",{action:e.callbackUrl,method:"POST",children:[nn("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>nn("div",{children:[nn("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),nn("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),nn("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"webauthn"===e.type&&nn("form",{action:e.callbackUrl,method:"POST",id:`${e.id}-form`,children:[nn("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.formFields).map(t=>nn("div",{children:[nn("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.formFields[t].label??t}),nn("input",{name:t,"data-form-field":!0,id:`input-${t}-for-${e.id}-provider`,type:e.formFields[t].type??"text",placeholder:e.formFields[t].placeholder??"",...e.formFields[t]})]},`input-group-${e.id}`)),nn("button",{id:`submitButton-${e.id}`,type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i+1<r.length&&nn("hr",{})]},e.id)})]}),l&&nn(rP,{children:nn("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${ni})(authURL, "${l}");
`}})})]})}({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||"webauthn"===e.type&&e.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:o,...n}),title:"Sign In",headTags:l})},signout:()=>a?.signOut?{redirect:a.signOut,cookies:i}:nc({cookies:i,theme:r,html:function(e){let{url:t,csrfToken:r,theme:n}=e;return nn("div",{className:"signout",children:[n?.brandColor&&nn("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n?.buttonText&&nn("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),nn("div",{className:"card",children:[n?.logo&&nn("img",{src:n.logo,alt:"Logo",className:"logo"}),nn("h1",{children:"Signout"}),nn("p",{children:"Are you sure you want to sign out?"}),nn("form",{action:t?.toString(),method:"POST",children:[nn("input",{type:"hidden",name:"csrfToken",value:r}),nn("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:e=>a?.verifyRequest?{redirect:a.verifyRequest,cookies:i}:nc({cookies:i,theme:r,html:function(e){let{url:t,theme:r}=e;return nn("div",{className:"verify-request",children:[r.brandColor&&nn("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),nn("div",{className:"card",children:[r.logo&&nn("img",{src:r.logo,alt:"Logo",className:"logo"}),nn("h1",{children:"Check your email"}),nn("p",{children:"A sign in link has been sent to your email address."}),nn("p",{children:nn("a",{className:"site",href:t.origin,children:t.host})})]})]})}({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>a?.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${e}`,cookies:i}:nc({cookies:i,theme:r,...function(e){let{url:t,error:r="default",theme:n}=e,i=`${t}/signin`,a={default:{status:200,heading:"Error",message:nn("p",{children:nn("a",{className:"site",href:t?.origin,children:t?.host})})},Configuration:{status:500,heading:"Server error",message:nn("div",{children:[nn("p",{children:"There is a problem with the server configuration."}),nn("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:nn("div",{children:[nn("p",{children:"You do not have permission to sign in."}),nn("p",{children:nn("a",{className:"button",href:i,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:nn("div",{children:[nn("p",{children:"The sign in link is no longer valid."}),nn("p",{children:"It may have been used already or it may have expired."})]}),signin:nn("a",{className:"button",href:i,children:"Sign in"})}},{status:s,heading:o,message:c,signin:l}=a[r]??a.default;return{status:s,html:nn("div",{className:"error",children:[n?.brandColor&&nn("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),nn("div",{className:"card",children:[n?.logo&&nn("img",{src:n?.logo,alt:"Logo",className:"logo"}),nn("h1",{children:o}),nn("div",{className:"message",children:c}),l]})]})}}({url:t,theme:r,error:e}),title:"Error"})}}function nd(e,t=Date.now()){return new Date(t+1e3*e)}async function nu(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:a,events:s,session:{strategy:o,generateSessionToken:c}}=n;if(!i)return{user:t,account:r};let l=r,{createUser:d,updateUser:u,getUser:p,getUserByAccount:h,getUserByEmail:f,linkAccount:m,createSession:y,getSessionAndUser:g,deleteSession:_}=i,w=null,v=null,b=!1,k="jwt"===o;if(e){if(k)try{let t=n.cookies.sessionToken.name;(w=await a.decode({...a,token:e,salt:t}))&&"sub"in w&&w.sub&&(v=await p(w.sub))}catch{}else{let t=await g(e);t&&(w=t.session,v=t.user)}}if("email"===l.type){let r=await f(t.email);return r?(v?.id!==r.id&&!k&&e&&await _(e),v=await u({id:r.id,emailVerified:new Date}),await s.updateUser?.({user:v})):(v=await d({...t,emailVerified:new Date}),await s.createUser?.({user:v}),b=!0),{session:w=k?{}:await y({sessionToken:c(),userId:v.id,expires:nd(n.session.maxAge)}),user:v,isNewUser:b}}if("webauthn"===l.type){let e=await h({providerAccountId:l.providerAccountId,provider:l.provider});if(e){if(v){if(e.id===v.id){let e={...l,userId:v.id};return{session:w,user:v,isNewUser:b,account:e}}throw new Z("The account is already associated with another user",{provider:l.provider})}w=k?{}:await y({sessionToken:c(),userId:e.id,expires:nd(n.session.maxAge)});let t={...l,userId:e.id};return{session:w,user:e,isNewUser:b,account:t}}{if(v){await m({...l,userId:v.id}),await s.linkAccount?.({user:v,account:l,profile:t});let e={...l,userId:v.id};return{session:w,user:v,isNewUser:b,account:e}}if(t.email?await f(t.email):null)throw new Z("Another account already exists with the same e-mail address",{provider:l.provider});v=await d({...t}),await s.createUser?.({user:v}),await m({...l,userId:v.id}),await s.linkAccount?.({user:v,account:l,profile:t}),w=k?{}:await y({sessionToken:c(),userId:v.id,expires:nd(n.session.maxAge)});let e={...l,userId:v.id};return{session:w,user:v,isNewUser:!0,account:e}}}let x=await h({providerAccountId:l.providerAccountId,provider:l.provider});if(x){if(v){if(x.id===v.id)return{session:w,user:v,isNewUser:b};throw new T("The account is already associated with another user",{provider:l.provider})}return{session:w=k?{}:await y({sessionToken:c(),userId:x.id,expires:nd(n.session.maxAge)}),user:x,isNewUser:b}}{let{provider:e}=n,{type:r,provider:i,providerAccountId:a,userId:o,...u}=l;if(l=Object.assign(e.account(u)??{},{providerAccountId:a,provider:i,type:r,userId:o}),v)return await m({...l,userId:v.id}),await s.linkAccount?.({user:v,account:l,profile:t}),{session:w,user:v,isNewUser:b};let p=t.email?await f(t.email):null;if(p){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)v=p;else throw new T("Another account already exists with the same e-mail address",{provider:l.provider})}else v=await d({...t,emailVerified:null});return await s.createUser?.({user:v}),await m({...l,userId:v.id}),await s.linkAccount?.({user:v,account:l,profile:t}),{session:w=k?{}:await y({sessionToken:c(),userId:v.id,expires:nd(n.session.maxAge)}),user:v,isNewUser:!0}}}function np(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(a="oauth4webapi/v2.10.3");let nh=Symbol(),nf=Symbol(),nm=Symbol(),ny=Symbol(),ng=new TextEncoder,n_=new TextDecoder;function nw(e){return"string"==typeof e?ng.encode(e):n_.decode(e)}function nv(e){return"string"==typeof e?function(e){try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw new nS("The input to be decoded is not correctly encoded.",{cause:e})}}(e):function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(e)}class nb{constructor(e){this.cache=new Map,this._cache=new Map,this.maxSize=e}get(e){let t=this.cache.get(e);return t||((t=this._cache.get(e))?(this.update(e,t),t):void 0)}has(e){return this.cache.has(e)||this._cache.has(e)}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this.update(e,t),this}delete(e){return this.cache.has(e)?this.cache.delete(e):!!this._cache.has(e)&&this._cache.delete(e)}update(e,t){this.cache.set(e,t),this.cache.size>=this.maxSize&&(this._cache=this.cache,this.cache=new Map)}}class nk extends Error{constructor(e){super(e??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class nx extends Error{constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}let nS=nx,nA=new nb(100);function nE(e){return e instanceof CryptoKey}function nT(e){return nE(e)&&"private"===e.type}function nC(e){try{let t=e.headers.get("dpop-nonce");t&&nA.set(new URL(e.url).origin,t)}catch{}return e}function nP(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function nR(e){np(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e);if(a&&!t.has("user-agent")&&t.set("user-agent",a),t.has("authorization"))throw TypeError('"options.headers" must not include the "authorization" header name');if(t.has("dpop"))throw TypeError('"options.headers" must not include the "dpop" header name');return t}function nO(e){if("function"==typeof e&&(e=e()),!(e instanceof AbortSignal))throw TypeError('"options.signal" must return or be an instance of AbortSignal');return e}async function nU(e,t){if(!(e instanceof URL))throw TypeError('"issuerIdentifier" must be an instance of URL');if("https:"!==e.protocol&&"http:"!==e.protocol)throw TypeError('"issuer.protocol" must be "https:" or "http:"');let r=new URL(e.href);switch(t?.algorithm){case void 0:case"oidc":r.pathname=`${r.pathname}/.well-known/openid-configuration`.replace("//","/");break;case"oauth2":"/"===r.pathname?r.pathname=".well-known/oauth-authorization-server":r.pathname=`.well-known/oauth-authorization-server/${r.pathname}`.replace("//","/");break;default:throw TypeError('"options.algorithm" must be "oidc" (default), or "oauth2"')}let n=nR(t?.headers);return n.set("accept","application/json"),(t?.[nm]||fetch)(r.href,{headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:t?.signal?nO(t.signal):null}).then(nC)}function nI(e){return"string"==typeof e&&0!==e.length}async function nj(e,t){let r;if(!(e instanceof URL))throw TypeError('"expectedIssuer" must be an instance of URL');if(!np(t,Response))throw TypeError('"response" must be an instance of Response');if(200!==t.status)throw new nS('"response" is not a conform Authorization Server Metadata response');ip(t);try{r=await t.json()}catch(e){throw new nS('failed to parse "response" body as JSON',{cause:e})}if(!nP(r))throw new nS('"response" body must be a top level object');if(!nI(r.issuer))throw new nS('"response" body "issuer" property must be a non-empty string');if(new URL(r.issuer).href!==e.href)throw new nS('"response" body "issuer" does not match "expectedIssuer"');return r}function n$(){return nv(crypto.getRandomValues(new Uint8Array(32)))}async function nH(e){if(!nI(e))throw TypeError('"codeVerifier" must be a non-empty string');return nv(await crypto.subtle.digest("SHA-256",nw(e)))}function nN(e){return encodeURIComponent(e).replace(/%20/g,"+")}function nL(e){switch(e.algorithm.name){case"RSA-PSS":return function(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new nk("unsupported RsaHashedKeyAlgorithm hash name")}}(e);case"RSASSA-PKCS1-v1_5":return function(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new nk("unsupported RsaHashedKeyAlgorithm hash name")}}(e);case"ECDSA":return function(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new nk("unsupported EcKeyAlgorithm namedCurve")}}(e);case"Ed25519":case"Ed448":return"EdDSA";default:throw new nk("unsupported CryptoKey algorithm name")}}function nD(e){let t=e?.[nh];return"number"==typeof t&&Number.isFinite(t)?t:0}function nM(e){let t=e?.[nf];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function nW(){return Math.floor(Date.now()/1e3)}async function nK(e,t,r,n){return nq({alg:nL(r),kid:n},function(e,t){let r=nW()+nD(t);return{jti:n$(),aud:[e.issuer,e.token_endpoint],exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}(e,t),r)}function nJ(e){if("object"!=typeof e||null===e)throw TypeError('"as" must be an object');if(!nI(e.issuer))throw TypeError('"as.issuer" property must be a non-empty string');return!0}function nZ(e){if("object"!=typeof e||null===e)throw TypeError('"client" must be an object');if(!nI(e.client_id))throw TypeError('"client.client_id" property must be a non-empty string');return!0}function nz(e){if(!nI(e))throw TypeError('"client.client_secret" property must be a non-empty string');return e}function nV(e,t){if(void 0!==t)throw TypeError(`"options.clientPrivateKey" property must not be provided when ${e} client authentication method is used.`)}function nB(e,t){if(void 0!==t)throw TypeError(`"client.client_secret" property must not be provided when ${e} client authentication method is used.`)}async function nF(e,t,r,n,i){switch(r.delete("client_secret"),r.delete("client_assertion_type"),r.delete("client_assertion"),t.token_endpoint_auth_method){case void 0:case"client_secret_basic":nV("client_secret_basic",i),n.set("authorization",function(e,t){let r=nN(e),n=nN(t),i=btoa(`${r}:${n}`);return`Basic ${i}`}(t.client_id,nz(t.client_secret)));break;case"client_secret_post":nV("client_secret_post",i),r.set("client_id",t.client_id),r.set("client_secret",nz(t.client_secret));break;case"private_key_jwt":{if(nB("private_key_jwt",t.client_secret),void 0===i)throw TypeError('"options.clientPrivateKey" must be provided when "client.token_endpoint_auth_method" is "private_key_jwt"');let{key:n,kid:a}=function(e){if(e instanceof CryptoKey)return{key:e};if(!(e?.key instanceof CryptoKey))return{};if(void 0!==e.kid&&!nI(e.kid))throw TypeError('"kid" must be a non-empty string');return{key:e.key,kid:e.kid}}(i);if(!nT(n))throw TypeError('"options.clientPrivateKey.key" must be a private CryptoKey');r.set("client_id",t.client_id),r.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),r.set("client_assertion",await nK(e,t,n,a));break}case"tls_client_auth":case"self_signed_tls_client_auth":case"none":nB(t.token_endpoint_auth_method,t.client_secret),nV(t.token_endpoint_auth_method,i),r.set("client_id",t.client_id);break;default:throw new nk("unsupported client token_endpoint_auth_method")}}async function nq(e,t,r){if(!r.usages.includes("sign"))throw TypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"');let n=`${nv(nw(JSON.stringify(e)))}.${nv(nw(JSON.stringify(t)))}`,i=nv(await crypto.subtle.sign(iy(r),r,nw(n)));return`${n}.${i}`}async function nG(e,t,r,n,i,a){let{privateKey:s,publicKey:o,nonce:c=nA.get(r.origin)}=t;if(!nT(s))throw TypeError('"DPoP.privateKey" must be a private CryptoKey');if(!(nE(o)&&"public"===o.type))throw TypeError('"DPoP.publicKey" must be a public CryptoKey');if(void 0!==c&&!nI(c))throw TypeError('"DPoP.nonce" must be a non-empty string or undefined');if(!o.extractable)throw TypeError('"DPoP.publicKey.extractable" must be true');let l=nW()+i,d=await nq({alg:nL(s),typ:"dpop+jwt",jwk:await nY(o)},{iat:l,jti:n$(),htm:n,nonce:c,htu:`${r.origin}${r.pathname}`,ath:a?nv(await crypto.subtle.digest("SHA-256",nw(a))):void 0},s);e.set("dpop",d)}async function nX(e){let{kty:t,e:r,n,x:i,y:a,crv:o}=await crypto.subtle.exportKey("jwk",e),c={kty:t,e:r,n,x:i,y:a,crv:o};return s.set(e,c),c}async function nY(e){return s||(s=new WeakMap),s.get(e)||nX(e)}function nQ(e,t,r){if("string"!=typeof e){if(r?.[ny])throw TypeError(`"as.mtls_endpoint_aliases.${t}" must be a string`);throw TypeError(`"as.${t}" must be a string`)}return new URL(e)}function n0(e,t,r){return r?.[ny]&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?nQ(e.mtls_endpoint_aliases[t],t,r):nQ(e[t],t)}function n1(e){return!("object"!=typeof e||Array.isArray(e))&&null!==e&&void 0!==e.error}let n2=/((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/,n5=/(?:^|, ?)([0-9a-zA-Z!#$%&'*+\-.^_`|~]+)(?=$|[ ,])/g;async function n4(e,t,r,n,i,a){if(!nI(e))throw TypeError('"accessToken" must be a non-empty string');if(!(r instanceof URL))throw TypeError('"url" must be an instance of URL');return n=nR(n),a?.DPoP===void 0?n.set("authorization",`Bearer ${e}`):(await nG(n,a.DPoP,r,"GET",nD({[nh]:a?.[nh]}),e),n.set("authorization",`DPoP ${e}`)),(a?.[nm]||fetch)(r.href,{body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:a?.signal?nO(a.signal):null}).then(nC)}async function n8(e,t,r,n){nJ(e),nZ(t);let i=n0(e,"userinfo_endpoint",n),a=nR(n?.headers);return t.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),n4(r,"GET",i,a,null,{...n,[nh]:nD(t)})}async function n6(e,t,r,n,i,a,s){return await nF(e,t,i,a,s?.clientPrivateKey),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(s?.[nm]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:r,redirect:"manual",signal:s?.signal?nO(s.signal):null}).then(nC)}async function n3(e,t,r,n,i){let a=n0(e,"token_endpoint",i);n.set("grant_type",r);let s=nR(i?.headers);return s.set("accept","application/json"),i?.DPoP!==void 0&&await nG(s,i.DPoP,a,"POST",nD(t)),n6(e,t,"POST",a,n,s,i)}Symbol();let n9=new WeakMap;function n7(e){if(!e.id_token)return;let t=n9.get(e);if(!t)throw TypeError('"ref" was already garbage collected or did not resolve from the proper sources');return t}async function ie(e,t,r,n=!1,i=!1){let a;if(nJ(e),nZ(t),!np(r,Response))throw TypeError('"response" must be an instance of Response');if(200!==r.status){let e;if(e=await ih(r))return e;throw new nS('"response" is not a conform Token Endpoint response')}ip(r);try{a=await r.json()}catch(e){throw new nS('failed to parse "response" body as JSON',{cause:e})}if(!nP(a))throw new nS('"response" body must be a top level object');if(!nI(a.access_token))throw new nS('"response" body "access_token" property must be a non-empty string');if(!nI(a.token_type))throw new nS('"response" body "token_type" property must be a non-empty string');if(a.token_type=a.token_type.toLowerCase(),"dpop"!==a.token_type&&"bearer"!==a.token_type)throw new nk("unsupported `token_type` value");if(void 0!==a.expires_in&&("number"!=typeof a.expires_in||a.expires_in<=0))throw new nS('"response" body "expires_in" property must be a positive number');if(!i&&void 0!==a.refresh_token&&!nI(a.refresh_token))throw new nS('"response" body "refresh_token" property must be a non-empty string');if(void 0!==a.scope&&"string"!=typeof a.scope)throw new nS('"response" body "scope" property must be a string');if(!n){if(void 0!==a.id_token&&!nI(a.id_token))throw new nS('"response" body "id_token" property must be a non-empty string');if(a.id_token){let{claims:r}=await i_(a.id_token,iw.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported),ig,nD(t),nM(t)).then(io.bind(void 0,["aud","exp","iat","iss","sub"])).then(ir.bind(void 0,e.issuer)).then(it.bind(void 0,t.client_id));if(Array.isArray(r.aud)&&1!==r.aud.length&&r.azp!==t.client_id)throw new nS('unexpected ID Token "azp" (authorized party) claim value');if(t.require_auth_time&&"number"!=typeof r.auth_time)throw new nS('unexpected ID Token "auth_time" (authentication time) claim value');n9.set(a,r)}}return a}function it(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw new nS('unexpected JWT "aud" (audience) claim value')}else if(t.claims.aud!==e)throw new nS('unexpected JWT "aud" (audience) claim value');return t}function ir(e,t){if(t.claims.iss!==e)throw new nS('unexpected JWT "iss" (issuer) claim value');return t}let ii=new WeakSet;async function ia(e,t,r,n,i,a){if(nJ(e),nZ(t),!ii.has(r))throw TypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()');if(!nI(n))throw TypeError('"redirectUri" must be a non-empty string');if(!nI(i))throw TypeError('"codeVerifier" must be a non-empty string');let s=iv(r,"code");if(!s)throw new nS('no authorization code in "callbackParameters"');let o=new URLSearchParams(a?.additionalParameters);return o.set("redirect_uri",n),o.set("code_verifier",i),o.set("code",s),n3(e,t,"authorization_code",o,a)}let is={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation"};function io(e,t){for(let r of e)if(void 0===t.claims[r])throw new nS(`JWT "${r}" (${is[r]}) claim missing`);return t}let ic=Symbol(),il=Symbol();async function id(e,t,r,n,i){let a=await ie(e,t,r);if(n1(a))return a;if(!nI(a.id_token))throw new nS('"response" body "id_token" property must be a non-empty string');i??(i=t.default_max_age??il);let s=n7(a);if((t.require_auth_time||i!==il)&&void 0===s.auth_time)throw new nS('ID Token "auth_time" (authentication time) claim missing');if(i!==il){if("number"!=typeof i||i<0)throw TypeError('"options.max_age" must be a non-negative number');let e=nW()+nD(t),r=nM(t);if(s.auth_time+i<e-r)throw new nS("too much time has elapsed since the last End-User authentication")}switch(n){case void 0:case ic:if(void 0!==s.nonce)throw new nS('unexpected ID Token "nonce" claim value');break;default:if(!nI(n))throw TypeError('"expectedNonce" must be a non-empty string');if(void 0===s.nonce)throw new nS('ID Token "nonce" claim missing');if(s.nonce!==n)throw new nS('unexpected ID Token "nonce" claim value')}return a}async function iu(e,t,r){let n=await ie(e,t,r,!0);if(n1(n))return n;if(void 0!==n.id_token){if("string"==typeof n.id_token&&n.id_token.length)throw new nS("Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing");delete n.id_token}return n}function ip(e){if(e.bodyUsed)throw TypeError('"response" body has been used already')}async function ih(e){if(e.status>399&&e.status<500){ip(e);try{let t=await e.json();if(nP(t)&&"string"==typeof t.error&&t.error.length)return void 0!==t.error_description&&"string"!=typeof t.error_description&&delete t.error_description,void 0!==t.error_uri&&"string"!=typeof t.error_uri&&delete t.error_uri,void 0!==t.algs&&"string"!=typeof t.algs&&delete t.algs,void 0!==t.scope&&"string"!=typeof t.scope&&delete t.scope,t}catch{}}}function im(e){if("number"!=typeof e.modulusLength||e.modulusLength<2048)throw new nS(`${e.name} modulusLength must be at least 2048 bits`)}function iy(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new nk}}(e.algorithm.namedCurve)};case"RSA-PSS":switch(im(e.algorithm),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new nk}case"RSASSA-PKCS1-v1_5":return im(e.algorithm),e.algorithm.name;case"Ed448":case"Ed25519":return e.algorithm.name}throw new nk}let ig=Symbol();async function i_(e,t,r,n,i){let a,s,o;let{0:c,1:l,2:d,length:u}=e.split(".");if(5===u)throw new nk("JWE structure JWTs are not supported");if(3!==u)throw new nS("Invalid JWT");try{a=JSON.parse(nw(nv(c)))}catch(e){throw new nS("failed to parse JWT Header body as base64url encoded JSON",{cause:e})}if(!nP(a))throw new nS("JWT Header must be a top level object");if(t(a),void 0!==a.crit)throw new nS('unexpected JWT "crit" header parameter');let p=nv(d);if(r!==ig){s=await r(a);let e=`${c}.${l}`;if(!await crypto.subtle.verify(iy(s),s,p,nw(e)))throw new nS("JWT signature verification failed")}try{o=JSON.parse(nw(nv(l)))}catch(e){throw new nS("failed to parse JWT Payload body as base64url encoded JSON",{cause:e})}if(!nP(o))throw new nS("JWT Payload must be a top level object");let h=nW()+n;if(void 0!==o.exp){if("number"!=typeof o.exp)throw new nS('unexpected JWT "exp" (expiration time) claim type');if(o.exp<=h-i)throw new nS('unexpected JWT "exp" (expiration time) claim value, timestamp is <= now()')}if(void 0!==o.iat&&"number"!=typeof o.iat)throw new nS('unexpected JWT "iat" (issued at) claim type');if(void 0!==o.iss&&"string"!=typeof o.iss)throw new nS('unexpected JWT "iss" (issuer) claim type');if(void 0!==o.nbf){if("number"!=typeof o.nbf)throw new nS('unexpected JWT "nbf" (not before) claim type');if(o.nbf>h+i)throw new nS('unexpected JWT "nbf" (not before) claim value, timestamp is > now()')}if(void 0!==o.aud&&"string"!=typeof o.aud&&!Array.isArray(o.aud))throw new nS('unexpected JWT "aud" (audience) claim type');return{header:a,claims:o,signature:p,key:s}}function iw(e,t,r){if(void 0!==e){if(r.alg!==e)throw new nS('unexpected JWT "alg" header parameter');return}if(Array.isArray(t)){if(!t.includes(r.alg))throw new nS('unexpected JWT "alg" header parameter');return}if("RS256"!==r.alg)throw new nS('unexpected JWT "alg" header parameter')}function iv(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw new nS(`"${t}" parameter must be provided only once`);return r}let ib=Symbol(),ik=Symbol();async function ix(e,t,r,n,i){let{cookies:a,logger:s}=n;s.debug(`CREATE_${e.toUpperCase()}`,{value:t,maxAge:r});let o=new Date;o.setTime(o.getTime()+1e3*r);let c={value:t};"state"===e&&i&&(c.data=i);let l=a[e].name;return{name:l,value:await tQ({...n.jwt,maxAge:r,token:c,salt:l}),options:{...a[e].options,expires:o}}}let iS={async create(e){let t=n$(),r=await nH(t);return{cookie:await ix("pkceCodeVerifier",t,900,e),value:r}},async use(e,t,r){let{provider:n}=r;if(!n?.checks?.includes("pkce"))return;let i=e?.[r.cookies.pkceCodeVerifier.name];if(!i)throw new b("PKCE code_verifier cookie was missing.");let a=await t0({...r.jwt,token:i,salt:r.cookies.pkceCodeVerifier.name});if(!a?.value)throw new b("PKCE code_verifier value could not be parsed.");return t.push({name:r.cookies.pkceCodeVerifier.name,value:"",options:{...r.cookies.pkceCodeVerifier.options,maxAge:0}}),a.value}};function iA(e){try{let t=new TextDecoder;return JSON.parse(t.decode(eg(e)))}catch{}}let iE={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new b("State data was provided but the provider is not configured to use state.");return}let n=ey(JSON.stringify({...t,random:n$()}));return{cookie:await ix("state",n,900,e,t),value:n}},async use(e,t,r,n){let{provider:i}=r;if(!i.checks.includes("state"))return;let a=e?.[r.cookies.state.name];if(!a)throw new b("State cookie was missing.");let s=await t0({...r.jwt,token:a,salt:r.cookies.state.name});if(!s?.value)throw new b("State (cookie) value could not be parsed.");let o=iA(s.value);if(!o)throw new b("State (encoded) value could not be parsed.");if(o.random!==n)throw new b(`Random state values did not match. Expected: ${o.random}. Got: ${n}`);return t.push({name:r.cookies.state.name,value:"",options:{...r.cookies.state.options,maxAge:0}}),s.value}},iT={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=n$();return{cookie:await ix("nonce",t,900,e),value:t}},async use(e,t,r){let{provider:n}=r;if(!n?.checks?.includes("nonce"))return;let i=e?.[r.cookies.nonce.name];if(!i)throw new b("Nonce cookie was missing.");let a=await t0({...r.jwt,token:i,salt:r.cookies.nonce.name});if(!a?.value)throw new b("Nonce value could not be parsed.");return t.push({name:r.cookies.nonce.name,value:"",options:{...r.cookies.nonce.options,maxAge:0}}),a.value}},iC={create:async(e,t,r)=>({cookie:await ix("webauthnChallenge",JSON.stringify({challenge:t,registerData:r}),900,e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name];if(!n)throw new b("Challenge cookie missing.");let i=await t0({...e.jwt,token:n,salt:e.cookies.webauthnChallenge.name});if(!i?.value)throw new b("Challenge value could not be parsed.");let a={name:e.cookies.webauthnChallenge.name,value:"",options:{...e.cookies.webauthnChallenge.options,maxAge:0}};return r.push(a),JSON.parse(i.value)}};async function iP(e,t,r,n){let i,a,s;let{logger:o,provider:c}=r,{token:l,userinfo:d}=c;if(l?.url&&"authjs.dev"!==l.url.host||d?.url&&"authjs.dev"!==d.url.host)i={issuer:c.issuer??"https://authjs.dev",token_endpoint:l?.url.toString(),userinfo_endpoint:d?.url.toString()};else{let e=new URL(c.issuer),t=await nU(e),r=await nj(e,t);if(!r.token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!r.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.");i=r}let u={client_id:c.clientId,client_secret:c.clientSecret,...c.client},p=[],h=await iE.use(t,p,r,n),f=function(e,t,r,n){var i;if(nJ(e),nZ(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw TypeError('"parameters" must be an instance of URLSearchParams, or URL');if(iv(r,"response"))throw new nS('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');let a=iv(r,"iss"),s=iv(r,"state");if(!a&&e.authorization_response_iss_parameter_supported)throw new nS('response parameter "iss" (issuer) missing');if(a&&a!==e.issuer)throw new nS('unexpected "iss" (issuer) response parameter value');switch(n){case void 0:case ik:if(void 0!==s)throw new nS('unexpected "state" response parameter encountered');break;case ib:break;default:if(!nI(n))throw new nS('"expectedState" must be a non-empty string');if(void 0===s)throw new nS('response parameter "state" missing');if(s!==n)throw new nS('unexpected "state" response parameter value')}let o=iv(r,"error");if(o)return{error:o,error_description:iv(r,"error_description"),error_uri:iv(r,"error_uri")};let c=iv(r,"id_token"),l=iv(r,"token");if(void 0!==c||void 0!==l)throw new nk("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),ii.add(i),i}(i,u,new URLSearchParams(e),c.checks.includes("state")?h:ib);if(n1(f)){let e={providerId:c.id,...f};throw o.debug("OAuthCallbackError",e),new C("OAuth Provider returned an error",e)}let m=await iS.use(t,p,r),y=c.callbackUrl;!r.isOnRedirectProxy&&c.redirectProxyUrl&&(y=c.redirectProxyUrl);let g=await ia(i,u,f,y,m??"auth");if(c.token?.conform&&(g=await c.token.conform(g.clone())??g),a=function(e){if(!np(e,Response))throw TypeError('"response" must be an instance of Response');let t=e.headers.get("www-authenticate");if(null===t)return;let r=[];for(let{1:e,index:n}of t.matchAll(n5))r.push([e,n]);if(r.length)return r.map(([e,r],n,i)=>{let a=i[n+1];return function(e,t){let r=t.split(n2).slice(1);if(!r.length)return{scheme:e.toLowerCase(),parameters:{}};r[r.length-1]=r[r.length-1].replace(/,$/,"");let n={};for(let e=1;e<r.length;e+=2){var i;let t=e;if('"'===r[t][0])for(;'"'!==r[t].slice(-1)&&++e<r.length;)r[t]+=r[e];n[r[t-1].replace(/^(?:, ?)|=$/g,"").toLowerCase()]=(i=r[t]).length>=2&&'"'===i[0]&&'"'===i[i.length-1]?i.slice(1,-1):i}return{scheme:e.toLowerCase(),parameters:n}}(e,a?t.slice(r,a[1]):t.slice(r))})}(g)){for(let e of a)console.log("challenge",e);throw Error("TODO: Handle www-authenticate challenges as needed")}let _={};if("oidc"===c.type){let e=await iT.use(t,p,r),n=await id(i,u,g,e??ic);if(n1(n))throw console.log("error",n),Error("TODO: Handle OIDC response body error");_=n7(n),s=n}else{if(n1(s=await iu(i,u,g)))throw console.log("error",s),Error("TODO: Handle OAuth 2.0 response body error");if(d?.request){let e=await d.request({tokens:s,provider:c});e instanceof Object&&(_=e)}else if(d?.url){let e=await n8(i,u,s.access_token);_=await e.json()}else throw TypeError("No userinfo endpoint configured")}return s.expires_in&&(s.expires_at=Math.floor(Date.now()/1e3)+Number(s.expires_in)),{...await iR(_,c,s,o),profile:_,cookies:p}}async function iR(e,t,r,n){try{let n=await t.profile(e,r);return{user:{...n,id:crypto.randomUUID(),email:n.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:n.id??crypto.randomUUID()}}}catch(r){n.debug("getProfile error details",e),n.error(new P(r,{provider:t.id}))}}async function iO(e,t,r,n){let i=await iH(e,t,r),{cookie:a}=await iC.create(e,i.challenge,r);return{status:200,cookies:[...n??[],a],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function iU(e,t,r,n){let i=await i$(e,t,r),{cookie:a}=await iC.create(e,i.challenge);return{status:200,cookies:[...n??[],a],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function iI(e,t,r){let n;let{adapter:i,provider:a}=e,s=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!s||"object"!=typeof s||!("id"in s)||"string"!=typeof s.id)throw new u("Invalid WebAuthn Authentication response.");let o=iD(iL(s.id)),c=await i.getAuthenticator(o);if(!c)throw new u(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:o})}`);let{challenge:l}=await iC.use(e,t.cookies,r);try{let r=a.getRelayingParty(e,t);n=await a.simpleWebAuthn.verifyAuthenticationResponse({...a.verifyAuthenticationOptions,expectedChallenge:l,response:s,authenticator:{...c,credentialDeviceType:c.credentialDeviceType,transports:iM(c.transports),credentialID:iL(c.credentialID),credentialPublicKey:iL(c.credentialPublicKey)},expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new J(e)}let{verified:d,authenticationInfo:p}=n;if(!d)throw new J("WebAuthn authentication response could not be verified.");try{let{newCounter:e}=p;await i.updateAuthenticatorCounter(c.credentialID,e)}catch(e){throw new h(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:o,oldCounter:c.counter,newCounter:p.newCounter})}`,e)}let f=await i.getAccount(c.providerAccountId,a.id);if(!f)throw new u(`WebAuthn account not found in database: ${JSON.stringify({credentialID:o,providerAccountId:c.providerAccountId})}`);let m=await i.getUser(f.userId);if(!m)throw new u(`WebAuthn user not found in database: ${JSON.stringify({credentialID:o,providerAccountId:c.providerAccountId,userID:f.userId})}`);return{account:f,user:m}}async function ij(e,t,r){var n;let i;let{provider:a}=e,s=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!s||"object"!=typeof s||!("id"in s)||"string"!=typeof s.id)throw new u("Invalid WebAuthn Registration response.");let{challenge:o,registerData:c}=await iC.use(e,t.cookies,r);if(!c)throw new u("Missing user registration data in WebAuthn challenge cookie.");try{let r=a.getRelayingParty(e,t);i=await a.simpleWebAuthn.verifyRegistrationResponse({...a.verifyRegistrationOptions,expectedChallenge:o,response:s,expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new J(e)}if(!i.verified||!i.registrationInfo)throw new J("WebAuthn registration response could not be verified.");let l={providerAccountId:iD(i.registrationInfo.credentialID),provider:e.provider.id,type:a.type},d={providerAccountId:l.providerAccountId,counter:i.registrationInfo.counter,credentialID:iD(i.registrationInfo.credentialID),credentialPublicKey:iD(i.registrationInfo.credentialPublicKey),credentialBackedUp:i.registrationInfo.credentialBackedUp,credentialDeviceType:i.registrationInfo.credentialDeviceType,transports:(n=s.response.transports,n?.join(","))};return{user:c,account:l,authenticator:d}}async function i$(e,t,r){let{provider:n,adapter:i}=e,a=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,s=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:s.id,allowCredentials:a?.map(e=>({id:iL(e.credentialID),type:"public-key",transports:iM(e.transports)}))})}async function iH(e,t,r){let{provider:n,adapter:i}=e,a=r.id?await i.listAuthenticatorsByUserId(r.id):null,s=rt(32),o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:s,userName:r.email,userDisplayName:r.name??void 0,rpID:o.id,rpName:o.name,excludeCredentials:a?.map(e=>({id:iL(e.credentialID),type:"public-key",transports:iM(e.transports)}))})}function iN(e){let{provider:t,adapter:r}=e;if(!r)throw new x("An adapter is required for the WebAuthn provider");if(!t||"webauthn"!==t.type)throw new H("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function iL(e){return new Uint8Array(Buffer.from(e,"base64"))}function iD(e){return Buffer.from(e).toString("base64")}function iM(e){return e?e.split(","):void 0}async function iW(e,t,r,n){if(!t.provider)throw new H("Callback route called without provider");let{query:i,body:a,method:s,headers:o}=e,{provider:c,adapter:l,url:d,callbackUrl:p,pages:h,jwt:f,events:y,callbacks:g,session:{strategy:_,maxAge:v},logger:k}=t,x="jwt"===_;try{if("oauth"===c.type||"oidc"===c.type){let a;let{proxyRedirect:s,randomState:o}=function(e,t,r){let n,i;if(t.redirectProxyUrl&&!e?.state)throw new b("Missing state in query, but required for redirect proxy");let a=iA(e?.state);if(n=a?.random,r){if(!a?.origin)return{randomState:n};i=`${a.origin}?${new URLSearchParams(e)}`}return{randomState:n,proxyRedirect:i}}(i,c,t.isOnRedirectProxy);if(s)return k.debug("proxy redirect",{proxyRedirect:s,randomState:o}),{redirect:s};let u=await iP(i,e.cookies,t,o);u.cookies.length&&n.push(...u.cookies),k.debug("authorization result",u);let{user:m,account:_,profile:w}=u;if(!m||!_||!w)return{redirect:`${d}/signin`,cookies:n};if(l){let{getUserByAccount:e}=l;a=await e({providerAccountId:_.providerAccountId,provider:c.id})}let S=await iK({user:a??m,account:_,profile:w},t);if(S)return{redirect:S,cookies:n};let{user:A,session:E,isNewUser:T}=await nu(r.value,m,_,t);if(x){let e={name:A.name,email:A.email,picture:A.image,sub:A.id?.toString()},i=await g.jwt({token:e,user:A,account:_,profile:w,isNewUser:T,trigger:T?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*v);let o=r.chunk(a,{expires:s});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:E.sessionToken,options:{...t.cookies.sessionToken.options,expires:E.expires}});if(await y.signIn?.({user:A,account:_,profile:w,isNewUser:T}),T&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:p})}`,cookies:n};return{redirect:p,cookies:n}}if("email"===c.type){let e=i?.token,a=i?.email;if(!e||!a){let t=TypeError("Missing token or email. The sign-in URL was manually opened without token/identifier or the link was not sent correctly in the email.",{cause:{hasToken:!!e,hasEmail:!!a}});throw t.name="Configuration",t}let s=c.secret??t.secret,o=await l.useVerificationToken({identifier:a,token:await re(`${e}${s}`)}),d=!!o,u=o?o.expires.valueOf()<Date.now():void 0;if(!d||u)throw new L({hasInvite:d,expired:u});let m=await l.getUserByEmail(a)??{id:crypto.randomUUID(),email:a,emailVerified:null},_={providerAccountId:m.email,userId:m.id,type:"email",provider:c.id},w=await iK({user:m,account:_},t);if(w)return{redirect:w,cookies:n};let{user:b,session:k,isNewUser:S}=await nu(r.value,m,_,t);if(x){let e={name:b.name,email:b.email,picture:b.image,sub:b.id?.toString()},i=await g.jwt({token:e,user:b,account:_,isNewUser:S,trigger:S?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*v);let o=r.chunk(a,{expires:s});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:k.sessionToken,options:{...t.cookies.sessionToken.options,expires:k.expires}});if(await y.signIn?.({user:b,account:_,isNewUser:S}),S&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:p})}`,cookies:n};return{redirect:p,cookies:n}}if("credentials"===c.type&&"POST"===s){let e=a??{};Object.entries(i??{}).forEach(([e,t])=>d.searchParams.set(e,t));let l=await c.authorize(e,new Request(d,{headers:o,method:s,body:JSON.stringify(a)}));if(l)l.id=l.id?.toString()??crypto.randomUUID();else throw new w;let u={providerAccountId:l.id,type:"credentials",provider:c.id},h=await iK({user:l,account:u,credentials:e},t);if(h)return{redirect:h,cookies:n};let m={name:l.name,email:l.email,picture:l.image,sub:l.id},_=await g.jwt({token:m,user:l,account:u,isNewUser:!1,trigger:"signIn"});if(null===_)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,i=await f.encode({...f,token:_,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*v);let s=r.chunk(i,{expires:a});n.push(...s)}return await y.signIn?.({user:l,account:u}),{redirect:p,cookies:n}}if("webauthn"===c.type&&"POST"===s){let i,a,s;let o=e.body?.action;if("string"!=typeof o||"authenticate"!==o&&"register"!==o)throw new u("Invalid action parameter");let c=iN(t);switch(o){case"authenticate":{let t=await iI(c,e,n);i=t.user,a=t.account;break}case"register":{let r=await ij(t,e,n);i=r.user,a=r.account,s=r.authenticator}}await iK({user:i,account:a},t);let{user:l,isNewUser:d,session:m,account:_}=await nu(r.value,i,a,t);if(!_)throw new u("Error creating or finding account");if(s&&l.id&&await c.adapter.createAuthenticator({...s,userId:l.id}),x){let e={name:l.name,email:l.email,picture:l.image,sub:l.id?.toString()},i=await g.jwt({token:e,user:l,account:_,isNewUser:d,trigger:d?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,a=await f.encode({...f,token:i,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*v);let o=r.chunk(a,{expires:s});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:m.sessionToken,options:{...t.cookies.sessionToken.options,expires:m.expires}});if(await y.signIn?.({user:l,account:_,isNewUser:d}),d&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:p})}`,cookies:n};return{redirect:p,cookies:n}}throw new H(`Callback for provider type (${c.type}) is not supported`)}catch(t){if(t instanceof u)throw t;let e=new m(t,{provider:c.id});throw k.debug("callback route error details",{method:s,query:i,body:a}),e}}async function iK(e,t){let r;let{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(e){if(e instanceof u)throw e;throw new f(e)}if(!r)throw new f("AccessDenied");if("string"==typeof r)return await i({url:r,baseUrl:t.url.origin})}async function iJ(e,t,r,n,i){let{adapter:a,jwt:s,events:o,callbacks:c,logger:l,session:{strategy:d,maxAge:u}}=e,p={body:null,headers:{"Content-Type":"application/json"},cookies:r},h=t.value;if(!h)return p;if("jwt"===d){try{let r=e.cookies.sessionToken.name,a=await s.decode({...s,token:h,salt:r});if(!a)throw Error("Invalid JWT");let l=await c.jwt({token:a,...n&&{trigger:"update"},session:i}),d=nd(u);if(null!==l){let e={user:{name:l.name,email:l.email,image:l.picture},expires:d.toISOString()},n=await c.session({session:e,token:l});p.body=n;let i=await s.encode({...s,token:l,salt:r}),a=t.chunk(i,{expires:d});p.cookies?.push(...a),await o.session?.({session:n,token:l})}else p.cookies?.push(...t.clean())}catch(e){l.error(new k(e)),p.cookies?.push(...t.clean())}return p}try{let{getSessionAndUser:r,deleteSession:s,updateSession:l}=a,d=await r(h);if(d&&d.session.expires.valueOf()<Date.now()&&(await s(h),d=null),d){let{user:t,session:r}=d,a=e.session.updateAge,s=r.expires.valueOf()-1e3*u+1e3*a,f=nd(u);s<=Date.now()&&await l({sessionToken:h,expires:f});let m=await c.session({session:{...r,user:t},user:t,newSession:i,...n?{trigger:"update"}:{}});p.body=m,p.cookies?.push({name:e.cookies.sessionToken.name,value:h,options:{...e.cookies.sessionToken.options,expires:f}}),await o.session?.({session:m})}else h&&p.cookies?.push(...t.clean())}catch(e){l.error(new R(e))}return p}async function iZ(e,t){let r,n;let{logger:i,provider:a}=t,s=a.authorization?.url;if(!s||"authjs.dev"===s.host){let e=new URL(a.issuer),t=await nU(e),r=await nj(e,t);if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");s=new URL(r.authorization_endpoint)}let o=s.searchParams,c=a.callbackUrl;!t.isOnRedirectProxy&&a.redirectProxyUrl&&(c=a.redirectProxyUrl,n={origin:a.callbackUrl},i.debug("using redirect proxy",{redirect_uri:c,data:n}));let l=Object.assign({response_type:"code",client_id:a.clientId,redirect_uri:c,...a.authorization?.params},Object.fromEntries(a.authorization?.url.searchParams??[]),e);for(let e in l)o.set(e,l[e]);let d=[],u=await iE.create(t,n);if(u&&(o.set("state",u.value),d.push(u.cookie)),a.checks?.includes("pkce")){if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===a.type&&(a.checks=["nonce"]);else{let{value:e,cookie:r}=await iS.create(t);o.set("code_challenge",e),o.set("code_challenge_method","S256"),d.push(r)}}let p=await iT.create(t);return p&&(o.set("nonce",p.value),d.push(p.cookie)),"oidc"!==a.type||s.searchParams.has("scope")||s.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:s,cookies:d,provider:a}),{redirect:s.toString(),cookies:d}}async function iz(e,t){let r;let{body:n}=e,{provider:i,callbacks:a,adapter:s}=t,o=(i.normalizeIdentifier??function(e){if(!e)throw Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`})(n?.email),c={id:crypto.randomUUID(),email:o,emailVerified:null},l=await s.getUserByEmail(o)??c,d={providerAccountId:o,userId:l.id,type:"email",provider:i.id};try{r=await a.signIn({user:l,account:d,email:{verificationRequest:!0}})}catch(e){throw new f(e)}if(!r)throw new f("AccessDenied");if("string"==typeof r)return{redirect:await a.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:u,theme:p}=t,h=await i.generateVerificationToken?.()??rt(32),m=new Date(Date.now()+(i.maxAge??86400)*1e3),y=i.secret??t.secret,g=new URL(t.basePath,t.url.origin),_=i.sendVerificationRequest({identifier:o,token:h,expires:m,url:`${g}/callback/${i.id}?${new URLSearchParams({callbackUrl:u,token:h,email:o})}`,provider:i,theme:p,request:new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}),w=s.createVerificationToken?.({identifier:o,token:await re(`${h}${y}`),expires:m});return await Promise.all([_,w]),{redirect:`${g}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}async function iV(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:n,cookies:i}=await iZ(e.query,r);return i&&t.push(...i),{redirect:n,cookies:t}}case"email":return{...await iz(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function iB(e,t,r){let{jwt:n,events:i,callbackUrl:a,logger:s,session:o}=r,c=t.value;if(!c)return{redirect:a,cookies:e};try{if("jwt"===o.strategy){let e=r.cookies.sessionToken.name,t=await n.decode({...n,token:c,salt:e});await i.signOut?.({token:t})}else{let e=await r.adapter?.deleteSession(c);await i.signOut?.({session:e})}}catch(e){s.error(new I(e))}return e.push(...t.clean()),{redirect:a,cookies:e}}async function iF(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,a=t.value;if(!a)return null;if("jwt"===i){let t=e.cookies.sessionToken.name,r=await n.decode({...n,token:a,salt:t});if(r&&r.sub)return{id:r.sub,name:r.name,email:r.email,image:r.picture}}else{let e=await r?.getSessionAndUser(a);if(e)return e.user}return null}async function iq(e,t,r,n){let i=iN(t),{provider:a}=i,{action:s}=e.query??{};if("register"!==s&&"authenticate"!==s&&void 0!==s)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let o=await iF(t,r),c=o?{user:o,exists:!0}:await a.getUserInfo(t,e),l=c?.user;switch(function(e,t,r){let{user:n,exists:i=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":if(n&&t===i)return"register";break;case void 0:if(!t){if(!n||i)return"authenticate";return"register"}}return null}(s,!!o,c)){case"authenticate":return iU(i,e,l,n);case"register":if("string"==typeof l?.email)return iO(i,e,l,n);default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function iG(e,t){let{action:r,providerId:n,error:i,method:a}=e,s=t.skipCSRFCheck===iX,{options:o,cookies:c}=await ru({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===a,csrfDisabled:s}),l=new d(o.cookies.sessionToken,e.cookies,o.logger);if("GET"===a){let t=nl({...o,query:e.query,cookies:c});switch(r){case"callback":return await iW(e,o,l,c);case"csrf":return t.csrf(s,o,c);case"error":return t.error(i);case"providers":return t.providers(o.providers);case"session":return await iJ(o,l,c);case"signin":return t.signin(n,i);case"signout":return t.signout();case"verify-request":return t.verifyRequest();case"webauthn-options":return await iq(e,o,l,c)}}else{let{csrfTokenVerified:t}=o;switch(r){case"callback":return"credentials"===o.provider.type&&rn(r,t),await iW(e,o,l,c);case"session":return rn(r,t),await iJ(o,l,c,!0,e.body?.data);case"signin":return rn(r,t),await iV(e,c,o);case"signout":return rn(r,t),await iB(c,l,o)}}throw new j(`Cannot handle action: ${r}`)}let iX=Symbol("skip-csrf-check"),iY=Symbol("return-type-raw");async function iQ(e,t){!function(e={},t){t||(t8.debug=()=>{}),e.error&&(t8.error=e.error),e.warn&&(t8.warn=e.warn),e.debug&&(t8.debug=e.debug)}(t.logger,t.debug);let r=await t9(e,t);if(!r)return Response.json("Bad request.",{status:400});let n=function(e,t){let{url:r}=e,n=[];if(!V&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new N(`Host must be trusted. URL was: ${e.url}`);if(!t.secret)return new E("Please define a `secret`.");let i=e.query?.callbackUrl;if(i&&!B(i,r.origin))return new _(`Invalid callback URL. Received: ${i}`);let{callbackUrl:a}=l(t.useSecureCookies??"https:"===r.protocol),s=e.cookies?.[t.cookies?.callbackUrl?.name??a.name];if(s&&!B(s,r.origin))return new _(`Invalid callback URL. Received: ${s}`);let o=!1;for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e;let{authorization:r,token:n,userinfo:i}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof i||i?.url||(e="userinfo"):e="token":e="authorization",e)return new v(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required.`)}if("credentials"===t.type)F=!0;else if("email"===t.type)q=!0;else if("webauthn"===t.type){var c;if(G=!0,t.simpleWebAuthnBrowserVersion&&(c=t.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(c)))return new u(`Invalid provider config for "${t.id}": simpleWebAuthnBrowserVersion "${t.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(t.enableConditionalUI){if(o)return new W("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time.");if(o=!0,!Object.values(t.formFields).some(e=>e.autocomplete&&e.autocomplete.toString().indexOf("webauthn")>-1))return new K(`Provider "${t.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param.`)}}}if(F){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new $("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize}))return new A("Must define an authorize() handler to use credentials authentication provider")}let{adapter:d,session:p}=t,h=[];if(q||p?.strategy==="database"||!p?.strategy&&d){if(q){if(!d)return new x("Email login requires an adapter.");h.push(...X)}else{if(!d)return new x("Database session requires an adapter.");h.push(...Y)}}if(G){if(!t.experimental?.enableWebAuthn)return new z("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config.");if(n.push("experimental-webauthn"),!d)return new x("WebAuthn requires an adapter.");h.push(...Q)}if(d){let e=h.filter(e=>!(e in d));if(e.length)return new S(`Required adapter methods were missing: ${e.join(", ")}`)}return V||(V=!0),n}(r,t);if(Array.isArray(n))n.forEach(t8.warn);else if(n){if(t8.error(n),!new Set(["signin","signout","error","verify-request"]).has(r.action)||"GET"!==r.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:e,theme:i}=t,a=e?.error&&r.url.searchParams.get("callbackUrl")?.startsWith(e.error);return!e?.error||a?(a&&t8.error(new y(`The error page ${e?.error} should not require authentication`)),t7(nl({theme:i}).error("Configuration"))):Response.redirect(`${e.error}?error=Configuration`)}let i=e.headers?.has("X-Auth-Return-Redirect"),a=t.raw===iY;try{let e=await iG(r,t);if(a)return e;let n=t7(e),s=n.headers.get("Location");if(!i||!s)return n;return Response.json({url:s},{headers:n.headers})}catch(d){t8.error(d);let n=d instanceof u;if(n&&a&&!i)throw d;if("POST"===e.method&&"session"===r.action)return Response.json(null,{status:400});let s=new URLSearchParams({error:d instanceof u&&M.has(d.type)?d.type:"Configuration"});d instanceof w&&s.set("code",d.code);let o=n&&d.kind||"error",c=t.pages?.[o]??`/${o.toLowerCase()}`,l=`${r.url.origin}${t.basePath}${c}?${s}`;if(i)return Response.json({url:l});return Response.redirect(l)}}var i0=r(87070);function i1(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new i0.NextRequest(n.replace(i,r),e)}function i2(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if("/"===r)return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),function(e,t){try{let r=e.AUTH_URL;r&&!t.basePath&&(t.basePath=new URL(r).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!t.secret?.length){t.secret=[];let r=e.AUTH_SECRET;for(let n of(r&&t.secret.push(r),[1,2,3])){let r=e[`AUTH_SECRET_${n}`];r&&t.secret.unshift(r)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??"production"!==e.NODE_ENV)),t.providers=t.providers.map(t=>{let r="function"==typeof t?t({}):t,n=r.id.toUpperCase();return"oauth"===r.type||"oidc"===r.type?(r.clientId??(r.clientId=e[`AUTH_${n}_ID`]),r.clientSecret??(r.clientSecret=e[`AUTH_${n}_SECRET`]),"oidc"===r.type&&(r.issuer??(r.issuer=e[`AUTH_${n}_ISSUER`]))):"email"===r.type&&(r.apiKey??(r.apiKey=e[`AUTH_${n}_KEY`])),r})}(process.env,e)}}var i5=r(88757),i4=r(61085);async function i8(e,t={},r,n){let i=new Headers((0,i5.headers)()),{redirect:a=!0,redirectTo:s,...o}=t instanceof FormData?Object.fromEntries(t):t,c=s?.toString()??i.get("Referer")??"/",l=i9("signin",i,n.basePath);if(!e)return l.searchParams.append("callbackUrl",c),a&&(0,i4.redirect)(l.toString()),l.toString();let d=`${l}/${e}?${new URLSearchParams(r)}`,u={};for(let t of n.providers){let{options:r,...n}="function"==typeof t?t():t,i=r?.id??n.id;if(i===e){u={id:i,type:r?.type??n.type};break}}if(!u.id){let e=`${l}?${new URLSearchParams({callbackUrl:c})}`;return a&&(0,i4.redirect)(e),e}"credentials"===u.type&&(d=d.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let p=new Request(d,{method:"POST",headers:i,body:new URLSearchParams({...o,callbackUrl:c})}),h=await iQ(p,{...n,raw:iY,skipCSRFCheck:iX});for(let e of h?.cookies??[])(0,i5.cookies)().set(e.name,e.value,e.options);return a?(0,i4.redirect)(h.redirect):h.redirect}async function i6(e,t){let r=new Headers((0,i5.headers)());r.set("Content-Type","application/x-www-form-urlencoded");let n=i9("signout",r,t.basePath),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),a=new Request(n,{method:"POST",headers:r,body:i}),s=await iQ(a,{...t,raw:iY,skipCSRFCheck:iX});for(let e of s?.cookies??[])(0,i5.cookies)().set(e.name,e.value,e.options);return e?.redirect??!0?(0,i4.redirect)(s.redirect):s}async function i3(e,t){let r=new Headers((0,i5.headers)());r.set("Content-Type","application/json");let n=new Request(i9("session",r,t.basePath),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await iQ(n,{...t,raw:iY,skipCSRFCheck:iX});for(let e of i?.cookies??[])(0,i5.cookies)().set(e.name,e.value,e.options);return i.body}function i9(e,t,r){let n=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(n){let{origin:t,pathname:r}=new URL(n),i=r.endsWith("/")?"":"/";return new URL(`${t}${r}${i}${e}`)}let i=t.get("x-forwarded-host")??t.get("host"),a="http"===t.get("x-forwarded-proto")?"http":"https",{origin:s,pathname:o}=new URL(r,`${a}://${i}`),c=o.endsWith("/")?"":"/";return new URL(`${s}${o}${c}${e}`)}async function i7(e,t){return iQ(new Request(i9("session",e,t.basePath),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??{...e[0].session,expires:e[0].session.expires?.toISOString?.()??e[0].session.expires};return{user:e[0].user??e[0].token,...r}}}})}function ae(e){return"function"==typeof e}function at(e,t){return"function"==typeof e?(...r)=>{if(!r.length){let r=(0,i5.headers)(),n=e(void 0);return t?.(n),i7(r,n).then(e=>e.json())}if(r[0]instanceof Request){let n=r[0],i=r[1],a=e(n);return t?.(a),ar([n,i],a)}if(ae(r[0])){let t=r[0];return async(...r)=>ar(r,e(r[0]),t)}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],a=e(n);return t?.(a),i7(new Headers(n.headers),a).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",t):i.appendHeader("set-cookie",t);return t})}:(...t)=>{if(!t.length)return i7((0,i5.headers)(),e).then(e=>e.json());if(t[0]instanceof Request)return ar([t[0],t[1]],e);if(ae(t[0])){let r=t[0];return async(...t)=>ar(t,e,r).then(e=>e)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return i7(new Headers(r.headers),e).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in n?n.headers.append("set-cookie",t):n.appendHeader("set-cookie",t);return t})}}async function ar(e,t,r){let n=i1(e[0]),i=await i7(n.headers,t),a=await i.json(),s=!0;t.callbacks?.authorized&&(s=await t.callbacks.authorized({request:n,auth:a}));let o=i0.NextResponse.next?.();if(s instanceof Response){o=s;let e=s.headers.get("Location"),{pathname:r}=n.nextUrl;e&&function(e,t,r){let n=t.replace(`${e}/`,""),i=Object.values(r.pages??{});return(an.has(n)||i.includes(t))&&t===e}(r,new URL(e).pathname,t)&&(s=!0)}else if(r)n.auth=a,o=await r(n,e[1])??i0.NextResponse.next();else if(!s){let e=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==e){let t=n.nextUrl.clone();t.pathname=e,t.searchParams.set("callbackUrl",n.nextUrl.href),o=i0.NextResponse.redirect(t)}}let c=new Response(o?.body,o);for(let e of i.headers.getSetCookie())c.headers.append("set-cookie",e);return c}let an=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);function ai(e){if("function"==typeof e){let t=t=>{let r=e(t);return i2(r),iQ(i1(t),r)};return{handlers:{GET:t,POST:t},auth:at(e,e=>i2(e)),signIn:(t,r,n)=>{let i=e(void 0);return i2(i),i8(t,r,n,i)},signOut:t=>{let r=e(void 0);return i2(r),i6(t,r)},unstable_update:t=>{let r=e(void 0);return i2(r),i3(t,r)}}}i2(e);let t=t=>iQ(i1(t),e);return{handlers:{GET:t,POST:t},auth:at(e),signIn:(t,r,n)=>i8(t,r,n,e),signOut:t=>i6(t,e),unstable_update:t=>i3(t,e)}}},7410:(e,t,r)=>{var n,i,a,s;let o;r.d(t,{G0:()=>eA,Km:()=>eE,O7:()=>eb,Rx:()=>ev,Ry:()=>eS,S1:()=>ex,Z_:()=>ew,hT:()=>ek}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(n||(n={})),(i||(i={})).mergeShapes=(e,t)=>({...e,...t});let c=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),l=e=>{switch(typeof e){case"undefined":return c.undefined;case"string":return c.string;case"number":return isNaN(e)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":if(Array.isArray(e))return c.array;if(null===e)return c.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return c.promise;if("undefined"!=typeof Map&&e instanceof Map)return c.map;if("undefined"!=typeof Set&&e instanceof Set)return c.set;if("undefined"!=typeof Date&&e instanceof Date)return c.date;return c.object;default:return c.unknown}},d=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class u extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}u.create=e=>new u(e);let p=(e,t)=>{let r;switch(e.code){case d.invalid_type:r=e.received===c.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case d.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.joinValues(e.keys,", ")}`;break;case d.invalid_union:r="Invalid input";break;case d.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.joinValues(e.options)}`;break;case d.invalid_enum_value:r=`Invalid enum value. Expected ${n.joinValues(e.options)}, received '${e.received}'`;break;case d.invalid_arguments:r="Invalid function arguments";break;case d.invalid_return_type:r="Invalid function return type";break;case d.invalid_date:r="Invalid date";break;case d.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case d.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case d.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case d.custom:r="Invalid input";break;case d.invalid_intersection_types:r="Intersection results could not be merged";break;case d.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case d.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.assertNever(e)}return{message:r}},h=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],s={...i,path:a},o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(s,{data:t,defaultError:o}).message;return{...i,path:a,message:i.message||o}};function f(e,t){let r=h({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,p,p].filter(e=>!!e)});e.common.issues.push(r)}class m{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return y;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t)r.push({key:await e.key,value:await e.value});return m.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return y;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let y=Object.freeze({status:"aborted"}),g=e=>({status:"dirty",value:e}),_=e=>({status:"valid",value:e}),w=e=>"aborted"===e.status,v=e=>"dirty"===e.status,b=e=>"valid"===e.status,k=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(a||(a={}));class x{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let S=(e,t)=>{if(b(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new u(e.common.issues);return this._error=t,this._error}}};function A(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class E{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return l(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new m,ctx:{common:e.parent.common,data:e.data,parsedType:l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(k(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:l(e)},i=this._parseSync({data:e,path:n.path,parent:n});return S(n,i)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:l(e)},n=this._parse({data:e,path:r.path,parent:r});return S(r,await (k(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),a=()=>n.addIssue({code:d.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new ed({schema:this,typeName:s.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return eu.create(this,this._def)}nullable(){return ep.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return B.create(this,this._def)}promise(){return el.create(this,this._def)}or(e){return q.create([this,e],this._def)}and(e){return Y.create(this,e,this._def)}transform(e){return new ed({...A(this._def),schema:this,typeName:s.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eh({...A(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:s.ZodDefault})}brand(){return new ey({typeName:s.ZodBranded,type:this,...A(this._def)})}catch(e){return new ef({...A(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:s.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eg.create(this,e)}readonly(){return e_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let T=/^c[^\s-]{8,}$/i,C=/^[a-z][a-z0-9]*$/,P=/^[0-9A-HJKMNP-TV-Z]{26}$/,R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,O=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,U=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,I=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,j=e=>e.precision?e.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class $ extends E{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==c.string){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.string,received:t.parsedType}),y}let r=new m;for(let s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if("max"===s.kind)e.data.length>s.value&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if("length"===s.kind){let n=e.data.length>s.value,i=e.data.length<s.value;(n||i)&&(t=this._getOrReturnCtx(e,t),n?f(t,{code:d.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&f(t,{code:d.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if("email"===s.kind)O.test(e.data)||(f(t=this._getOrReturnCtx(e,t),{validation:"email",code:d.invalid_string,message:s.message}),r.dirty());else if("emoji"===s.kind)o||(o=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),o.test(e.data)||(f(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:d.invalid_string,message:s.message}),r.dirty());else if("uuid"===s.kind)R.test(e.data)||(f(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:d.invalid_string,message:s.message}),r.dirty());else if("cuid"===s.kind)T.test(e.data)||(f(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:d.invalid_string,message:s.message}),r.dirty());else if("cuid2"===s.kind)C.test(e.data)||(f(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:d.invalid_string,message:s.message}),r.dirty());else if("ulid"===s.kind)P.test(e.data)||(f(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:d.invalid_string,message:s.message}),r.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(n){f(t=this._getOrReturnCtx(e,t),{validation:"url",code:d.invalid_string,message:s.message}),r.dirty()}else if("regex"===s.kind)s.regex.lastIndex=0,s.regex.test(e.data)||(f(t=this._getOrReturnCtx(e,t),{validation:"regex",code:d.invalid_string,message:s.message}),r.dirty());else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(f(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(f(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(f(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty());else if("datetime"===s.kind)j(s).test(e.data)||(f(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:"datetime",message:s.message}),r.dirty());else if("ip"===s.kind){var i,a;i=e.data,("v4"===(a=s.version)||!a)&&U.test(i)||("v6"===a||!a)&&I.test(i)||(f(t=this._getOrReturnCtx(e,t),{validation:"ip",code:d.invalid_string,message:s.message}),r.dirty())}else n.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:d.invalid_string,...a.errToObj(r)})}_addCheck(e){return new $({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...a.errToObj(e)})}url(e){return this._addCheck({kind:"url",...a.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...a.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...a.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...a.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...a.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...a.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...a.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...a.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...a.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...a.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...a.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...a.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...a.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...a.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...a.errToObj(t)})}nonempty(e){return this.min(1,a.errToObj(e))}trim(){return new $({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}$.create=e=>{var t;return new $({checks:[],typeName:s.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...A(e)})};class H extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==c.number){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.number,received:t.parsedType}),y}let r=new m;for(let i of this._def.checks)"int"===i.kind?n.isInteger(e.data)||(f(t=this._getOrReturnCtx(e,t),{code:d.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}(e.data,i.value)&&(f(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(f(t=this._getOrReturnCtx(e,t),{code:d.not_finite,message:i.message}),r.dirty()):n.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,a.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.toString(t))}setLimit(e,t,r,n){return new H({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:a.toString(n)}]})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:a.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:a.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:a.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:a.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:a.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&n.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}H.create=e=>new H({checks:[],typeName:s.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...A(e)});class N extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==c.bigint){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.bigint,received:t.parsedType}),y}let r=new m;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(f(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):n.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,a.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.toString(t))}setLimit(e,t,r,n){return new N({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:a.toString(n)}]})}_addCheck(e){return new N({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:a.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}N.create=e=>{var t;return new N({checks:[],typeName:s.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...A(e)})};class L extends E{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==c.boolean){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.boolean,received:t.parsedType}),y}return _(e.data)}}L.create=e=>new L({typeName:s.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...A(e)});class D extends E{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==c.date){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.date,received:t.parsedType}),y}if(isNaN(e.data.getTime()))return f(this._getOrReturnCtx(e),{code:d.invalid_date}),y;let r=new m;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(f(t=this._getOrReturnCtx(e,t),{code:d.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):n.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:a.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:a.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}D.create=e=>new D({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:s.ZodDate,...A(e)});class M extends E{_parse(e){if(this._getType(e)!==c.symbol){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.symbol,received:t.parsedType}),y}return _(e.data)}}M.create=e=>new M({typeName:s.ZodSymbol,...A(e)});class W extends E{_parse(e){if(this._getType(e)!==c.undefined){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.undefined,received:t.parsedType}),y}return _(e.data)}}W.create=e=>new W({typeName:s.ZodUndefined,...A(e)});class K extends E{_parse(e){if(this._getType(e)!==c.null){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.null,received:t.parsedType}),y}return _(e.data)}}K.create=e=>new K({typeName:s.ZodNull,...A(e)});class J extends E{constructor(){super(...arguments),this._any=!0}_parse(e){return _(e.data)}}J.create=e=>new J({typeName:s.ZodAny,...A(e)});class Z extends E{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _(e.data)}}Z.create=e=>new Z({typeName:s.ZodUnknown,...A(e)});class z extends E{_parse(e){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.never,received:t.parsedType}),y}}z.create=e=>new z({typeName:s.ZodNever,...A(e)});class V extends E{_parse(e){if(this._getType(e)!==c.undefined){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.void,received:t.parsedType}),y}return _(e.data)}}V.create=e=>new V({typeName:s.ZodVoid,...A(e)});class B extends E{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==c.array)return f(t,{code:d.invalid_type,expected:c.array,received:t.parsedType}),y;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(f(t,{code:e?d.too_big:d.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(f(t,{code:d.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(f(t,{code:d.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new x(t,e,t.path,r)))).then(e=>m.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new x(t,e,t.path,r)));return m.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new B({...this._def,minLength:{value:e,message:a.toString(t)}})}max(e,t){return new B({...this._def,maxLength:{value:e,message:a.toString(t)}})}length(e,t){return new B({...this._def,exactLength:{value:e,message:a.toString(t)}})}nonempty(e){return this.min(1,e)}}B.create=(e,t)=>new B({type:e,minLength:null,maxLength:null,exactLength:null,typeName:s.ZodArray,...A(t)});class F extends E{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=n.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==c.object){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.object,received:t.parsedType}),y}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof z&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||a.push(e);let s=[];for(let e of i){let t=n[e],i=r.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new x(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof z){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)s.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(f(r,{code:d.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new x(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>m.mergeObjectSync(t,e)):m.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return a.errToObj,new F({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;let c=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=a.errToObj(e).message)&&void 0!==o?o:c}:{message:c}}}:{}})}strip(){return new F({...this._def,unknownKeys:"strip"})}passthrough(){return new F({...this._def,unknownKeys:"passthrough"})}extend(e){return new F({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new F({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:s.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new F({...this._def,catchall:e})}pick(e){let t={};return n.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new F({...this._def,shape:()=>t})}omit(e){let t={};return n.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new F({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof F){let r={};for(let n in t.shape){let i=t.shape[n];r[n]=eu.create(e(i))}return new F({...t._def,shape:()=>r})}return t instanceof B?new B({...t._def,type:e(t.element)}):t instanceof eu?eu.create(e(t.unwrap())):t instanceof ep?ep.create(e(t.unwrap())):t instanceof Q?Q.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return n.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new F({...this._def,shape:()=>t})}required(e){let t={};return n.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eu;)e=e._def.innerType;t[r]=e}}),new F({...this._def,shape:()=>t})}keyof(){return es(n.objectKeys(this.shape))}}F.create=(e,t)=>new F({shape:()=>e,unknownKeys:"strip",catchall:z.create(),typeName:s.ZodObject,...A(t)}),F.strictCreate=(e,t)=>new F({shape:()=>e,unknownKeys:"strict",catchall:z.create(),typeName:s.ZodObject,...A(t)}),F.lazycreate=(e,t)=>new F({shape:e,unknownKeys:"strip",catchall:z.create(),typeName:s.ZodObject,...A(t)});class q extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new u(e.ctx.common.issues));return f(t,{code:d.invalid_union,unionErrors:r}),y});{let e;let n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new u(e));return f(t,{code:d.invalid_union,unionErrors:i}),y}}get options(){return this._def.options}}q.create=(e,t)=>new q({options:e,typeName:s.ZodUnion,...A(t)});let G=e=>{if(e instanceof ei)return G(e.schema);if(e instanceof ed)return G(e.innerType());if(e instanceof ea)return[e.value];if(e instanceof eo)return e.options;if(e instanceof ec)return Object.keys(e.enum);if(e instanceof eh)return G(e._def.innerType);if(e instanceof W)return[void 0];else if(e instanceof K)return[null];else return null};class X extends E{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.object)return f(t,{code:d.invalid_type,expected:c.object,received:t.parsedType}),y;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(f(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=G(r.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new X({typeName:s.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...A(r)})}}class Y extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if(w(e)||w(i))return y;let a=function e(t,r){let i=l(t),a=l(r);if(t===r)return{valid:!0,data:t};if(i===c.object&&a===c.object){let i=n.objectKeys(r),a=n.objectKeys(t).filter(e=>-1!==i.indexOf(e)),s={...t,...r};for(let n of a){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};s[n]=i.data}return{valid:!0,data:s}}if(i===c.array&&a===c.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return i===c.date&&a===c.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,i.value);return a.valid?((v(e)||v(i))&&t.dirty(),{status:t.value,value:a.data}):(f(r,{code:d.invalid_intersection_types}),y)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Y.create=(e,t,r)=>new Y({left:e,right:t,typeName:s.ZodIntersection,...A(r)});class Q extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.array)return f(r,{code:d.invalid_type,expected:c.array,received:r.parsedType}),y;if(r.data.length<this._def.items.length)return f(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),y;!this._def.rest&&r.data.length>this._def.items.length&&(f(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new x(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>m.mergeArray(t,e)):m.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Q({...this._def,rest:e})}}Q.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new Q({items:e,typeName:s.ZodTuple,rest:null,...A(t)})};class ee extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.object)return f(r,{code:d.invalid_type,expected:c.object,received:r.parsedType}),y;let n=[],i=this._def.keyType,a=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new x(r,e,r.path,e)),value:a._parse(new x(r,r.data[e],r.path,e))});return r.common.async?m.mergeObjectAsync(t,n):m.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ee(t instanceof E?{keyType:e,valueType:t,typeName:s.ZodRecord,...A(r)}:{keyType:$.create(),valueType:e,typeName:s.ZodRecord,...A(t)})}}class et extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.map)return f(r,{code:d.invalid_type,expected:c.map,received:r.parsedType}),y;let n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([e,t],a)=>({key:n._parse(new x(r,e,r.path,[a,"key"])),value:i._parse(new x(r,t,r.path,[a,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return y;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return y;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}et.create=(e,t,r)=>new et({valueType:t,keyType:e,typeName:s.ZodMap,...A(r)});class er extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.set)return f(r,{code:d.invalid_type,expected:c.set,received:r.parsedType}),y;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(f(r,{code:d.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(f(r,{code:d.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let r=new Set;for(let n of e){if("aborted"===n.status)return y;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let s=[...r.data.values()].map((e,t)=>i._parse(new x(r,e,r.path,t)));return r.common.async?Promise.all(s).then(e=>a(e)):a(s)}min(e,t){return new er({...this._def,minSize:{value:e,message:a.toString(t)}})}max(e,t){return new er({...this._def,maxSize:{value:e,message:a.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}er.create=(e,t)=>new er({valueType:e,minSize:null,maxSize:null,typeName:s.ZodSet,...A(t)});class en extends E{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.function)return f(t,{code:d.invalid_type,expected:c.function,received:t.parsedType}),y;function r(e,r){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,p,p].filter(e=>!!e),issueData:{code:d.invalid_arguments,argumentsError:r}})}function n(e,r){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,p,p].filter(e=>!!e),issueData:{code:d.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof el){let e=this;return _(async function(...t){let s=new u([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw s.addIssue(r(t,e)),s}),c=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(c,i).catch(e=>{throw s.addIssue(n(c,e)),s})})}{let e=this;return _(function(...t){let s=e._def.args.safeParse(t,i);if(!s.success)throw new u([r(t,s.error)]);let o=Reflect.apply(a,this,s.data),c=e._def.returns.safeParse(o,i);if(!c.success)throw new u([n(o,c.error)]);return c.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new en({...this._def,args:Q.create(e).rest(Z.create())})}returns(e){return new en({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new en({args:e||Q.create([]).rest(Z.create()),returns:t||Z.create(),typeName:s.ZodFunction,...A(r)})}}class ei extends E{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ei.create=(e,t)=>new ei({getter:e,typeName:s.ZodLazy,...A(t)});class ea extends E{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return f(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),y}return{status:"valid",value:e.data}}get value(){return this._def.value}}function es(e,t){return new eo({values:e,typeName:s.ZodEnum,...A(t)})}ea.create=(e,t)=>new ea({value:e,typeName:s.ZodLiteral,...A(t)});class eo extends E{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return f(t,{expected:n.joinValues(r),received:t.parsedType,code:d.invalid_type}),y}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return f(t,{received:t.data,code:d.invalid_enum_value,options:r}),y}return _(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return eo.create(e)}exclude(e){return eo.create(this.options.filter(t=>!e.includes(t)))}}eo.create=es;class ec extends E{_parse(e){let t=n.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==c.string&&r.parsedType!==c.number){let e=n.objectValues(t);return f(r,{expected:n.joinValues(e),received:r.parsedType,code:d.invalid_type}),y}if(-1===t.indexOf(e.data)){let e=n.objectValues(t);return f(r,{received:r.data,code:d.invalid_enum_value,options:e}),y}return _(e.data)}get enum(){return this._def.values}}ec.create=(e,t)=>new ec({values:e,typeName:s.ZodNativeEnum,...A(t)});class el extends E{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==c.promise&&!1===t.common.async?(f(t,{code:d.invalid_type,expected:c.promise,received:t.parsedType}),y):_((t.parsedType===c.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}el.create=(e,t)=>new el({type:e,typeName:s.ZodPromise,...A(t)});class ed extends E{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===s.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:e=>{f(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===i.type){let e=i.transform(r.data,a);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r})):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===i.type){let e=e=>{let t=i.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?y:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?y:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===i.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>b(e)?Promise.resolve(i.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!b(e))return e;let n=i.transform(e.value,a);if(n instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}}n.assertNever(i)}}ed.create=(e,t,r)=>new ed({schema:e,typeName:s.ZodEffects,effect:t,...A(r)}),ed.createWithPreprocess=(e,t,r)=>new ed({schema:t,effect:{type:"preprocess",transform:e},typeName:s.ZodEffects,...A(r)});class eu extends E{_parse(e){return this._getType(e)===c.undefined?_(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eu.create=(e,t)=>new eu({innerType:e,typeName:s.ZodOptional,...A(t)});class ep extends E{_parse(e){return this._getType(e)===c.null?_(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ep.create=(e,t)=>new ep({innerType:e,typeName:s.ZodNullable,...A(t)});class eh extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===c.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eh.create=(e,t)=>new eh({innerType:e,typeName:s.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...A(t)});class ef extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return k(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new u(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new u(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ef.create=(e,t)=>new ef({innerType:e,typeName:s.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...A(t)});class em extends E{_parse(e){if(this._getType(e)!==c.nan){let t=this._getOrReturnCtx(e);return f(t,{code:d.invalid_type,expected:c.nan,received:t.parsedType}),y}return{status:"valid",value:e.data}}}em.create=e=>new em({typeName:s.ZodNaN,...A(e)}),Symbol("zod_brand");class ey extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eg extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?y:"dirty"===e.status?(t.dirty(),g(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?y:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eg({in:e,out:t,typeName:s.ZodPipeline})}}class e_ extends E{_parse(e){let t=this._def.innerType._parse(e);return b(t)&&(t.value=Object.freeze(t.value)),t}}e_.create=(e,t)=>new e_({innerType:e,typeName:s.ZodReadonly,...A(t)}),F.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(s||(s={}));let ew=$.create,ev=H.create,eb=(em.create,N.create,L.create),ek=D.create,ex=(M.create,W.create),eS=(K.create,J.create,Z.create,z.create,V.create,B.create,F.create),eA=(F.strictCreate,q.create),eE=(X.create,Y.create,Q.create,ee.create,et.create,er.create,en.create,ei.create,ea.create,eo.create);ec.create,el.create,ed.create,eu.create,ep.create,ed.createWithPreprocess,eg.create}};